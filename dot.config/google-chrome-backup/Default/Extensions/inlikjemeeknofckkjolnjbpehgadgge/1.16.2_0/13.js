(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{32:function(e,t,a){"use strict";var i=a(0),n=a(3),s=a(11),o=a(5),l=a(4),r=(a(15),a(7));let c,d,h,u,p,f,m,b,g,v,w,_,O=e=>e;const y=window.async;if(!y)throw new Error("ADD async");class D extends r.a{constructor({model:e}){super(),this.model=e,this.setClientId(e.get("client_id")||App.clients.defaultId),this.setSessionId(e.get("session_id")),this.state.sessionNames={},this.loadSessions(),this.setProxyID(e.get("proxy_id")),this.state.proxyNames={},this.loadProxies(),e.on("change",()=>{this.state.session_id=e.get("session_id")})}async loadSessions(){let e=await o.a.api("/sessions");this.state.sessions=e.data,this.state.sessionNames=e.data.reduce((e,t)=>(e[t.id]=t.name,e),{})}setClientId(e){this.state.client_id=e,this.model.set("client_id",e)}setSessionId(e,t){t&&t.preventDefault(),this.state.session_id=e,this.model.set("session_id",e)}setProxyID(e,t){t&&t.preventDefault(),this.state.proxy_id=e,this.model.set("proxy_id",e)}async loadProxies(){const e=await o.a.api("/proxies");let t=(await o.a.api("/proxies/global")).data;const a=USER.constraint.plan_id;t=t.filter(e=>e.plan_id==a),this.state.proxies=[...e.data,...t],this.state.proxyNames=e.data.reduce((e,t)=>(e[t.id]=t.name,e),{}),this.state.proxyNames=t.reduce((e,t)=>(e[t.id]=t.name,e),this.state.proxyNames)}createTpl({client_id:e,session_id:t,sessions:a,sessionNames:i,proxyNames:n,proxies:s,proxy_id:o}){let l=App.clients.get(e),y=!!a,I=!!s;return Object(r.b)(c||(c=O`<div class='flex align-items'><select @change=${0}>
      ${0}
      </select>
      ${0}
      ${0}
    </div>`),e=>this.setClientId(e.target.value),Object(r.d)(App.clients.toArray(),e=>e.id,t=>Object(r.b)(d||(d=O`<option value=${0} ?selected=${0}>${0}</option>`),t.id,t.id==e,t.getInfo())),l&&l.isWeb()?Object(r.b)(h||(h=O`<div class='ml3 dropdown relative'>
        <a class='dropdown-toggle btn btn-default' data-toggle='dropdown'
          href='#'>
          Profile - ${0}<span class='caret'></span>
        </a>
        <ul class='dropdown-menu'>
          ${0}
        </ul>
        
      </div>`),t?i[t]||"Deleted":"Empty",y?[Object(r.b)(u||(u=O`<li><a href='#' @click=${0}>
                <i class='mr2 fa ${0}'></i>
                Empty (Default)</a></li>`),e=>this.setSessionId(null,e),t?"mr4":"fa-check"),...a.map(e=>Object(r.b)(p||(p=O`<li>
            <a data-id=${0} href='#' @click=${0}>
              <i class='mr2 fa ${0}'></i>
              ${0}
            </a>
          </li>`),e.id,t=>this.setSessionId(e.id,t),t==e.id?"fa-check":"mr4",e.name)),Object(r.b)(f||(f=O`
          <li class='divider'></li>

          <li><a href='#profiles/' target='_blank'>
              <span class='pl4'> Manage Profiles<span></a></li>

          <li><a href='${0}/kb/help/profiles-for-cloud-monitors' target='_blank'>
              <span class='pl4'> Learn More<span></a></li>
              `),URL_WEBSITE)]:Object(r.b)(m||(m=O`<li><a>Loading...</a></li>`))):"",l&&l.isWeb()?Object(r.b)(b||(b=O`<div class='ml3 dropdown relative'>
      <a class='dropdown-toggle btn btn-default' data-toggle='dropdown'>
        Proxy - ${0}<span class='caret'></span>
      </a>
      <ul class='dropdown-menu'>
      ${0}
      </ul>
      
      </div>`),o?n[o]||"Deleted":"Default",I?[Object(r.b)(g||(g=O`<li><a href='#' @click=${0}>
          <i class='mr2 fa ${0}'></i>
          Default</a></li>`),e=>this.setProxyID(null,e),o?"mr4":"fa-check"),...s.map(e=>Object(r.b)(v||(v=O`<li>
          <a data-id=${0} href='#' @click=${0}>
            <i class='mr2 fa ${0}'></i>
            ${0}
          </a>
        </li>`),e.id,t=>this.setProxyID(e.id,t),t==e.id?"fa-check":"mr4",e.name)),Object(r.b)(w||(w=O`
        <li class='divider'></li>

        <li><a href='#proxies/' target='_blank'>
            <span class='pl4'> Manage Proxies<span></a></li>

        <li><a href='${0}/kb/help/proxies' target='_blank'>
            <span class='pl4'> Learn More<span></a></li>
            `),URL_WEBSITE)]:Object(r.b)(_||(_=O`<li><a>Loading...</a></li>`))):"")}}const x=l.a.Collection.extend({name:"ClientManager",actions:{"client edit name":{fn:"action_edit_name"},"client remove":{fn:"action_remove"}},action_edit_name:function(e){const t=this,a=s.a.create("text"),i=this.collection.get(e),n=new l.a.PromptModal({title:"l_name",parent:this.getRoot(),view:a,width:500});n.show(),a.setValue(i.get("info")),$(a.field).focus(),n.on("save",(function(){const e=a.getValue();i.save({info:e},{patch:!0}),n.remove(),t.onReset(t.collection,{previousModels:t.collection.models})}))},action_remove:function(e){const t=this.collection.get(e);return e==this.collection.defaultId?alert(Object(i.a)("Can't remove self")):t.isWeb()?alert(Object(i.a)("Can't remove web app")):void(confirm(Object(i.a)("Remove "+t.get("info")+"?"))&&t.save({state:90},{wait:!0,success:()=>{this.collection.remove(t)}}))},addOne:function(e){if(e.get("type")<3)return new l.a.Base;const t=e.get("info"),a=e.id==this.collection.defaultId,n=new l.a.Base({el:P(SPAN(BUTTON({class:"btn btn-default btn-xs","data-action":"client edit name","data-action-param":e.id},I({class:"fa fa-edit"}))," ",BUTTON({class:"btn btn-danger btn-xs","data-action":"client remove","data-action-param":e.id},I({class:"fa fa-trash-o"})))," ",SPAN({style:a?"font-weight: bold;":""},t,a?" ("+Object(i.a)("l_device_this")+")":""),SMALL({},moment(e.get("ts")).format(" (YYYY-MM-DD)"))),parent:this}).render();return this.$el.append(n.el),n},onSave:function(){n.a.info("l_loading"),y.eachSeries(this.collection.models,(function(e,t){e.hasChanged("info")?e.save(null,{error:function(){t(new Error("Failed to save changes"))},success:function(){t()}}):t()}),(function(e){n.a.reset()}))},renderBase:function(){}});t.a={ClientManager:x,ClientSelector:D}},49:function(e,t,a){"use strict";a.r(t);var i=a(14),n=a(0),s=a(51),o=a(2),l=a(16),r=a(3),c=a(4),d=a(5),h=a(15),u=a(39),p=a(11),f=a(1),m=a(9);if(!window.jQuery)throw new Error("ADD jQuery");const b=window._;if(!b)throw new Error("ADD _");if(!window.domo)throw new Error("ADD domo");const g=window.Backbone;if(!g)throw new Error("ADD Backbone");const v=c.a.Base.extend({name:"actions$Common",events:{change:"event_change"},event_change:function(){this.saveValues()},render:function(){return this.$el.attr({id:"common",class:"panel panel-default"}).append(HEADER({class:"panel-heading"},H3(Object(n.a)("l_actions"))),DIV({class:"panel-body"},DIV({class:"checkbox"},LABEL(INPUT({type:"checkbox",name:"actions.popup"}),Object(n.a)("l_action_local_popup"))),DIV({class:"checkbox"},LABEL(INPUT({type:"checkbox",name:"actions.audio"}),Object(n.a)("l_action_local_audio"))),DIV({class:"form-group"},Object(n.a)("m_firefox_only")," - ",Object(n.a)("m_autohide_popup"),": ",SELECT({name:"actions.popup.autohide",style:"width:auto"},OPTION({value:0},Object(n.a)("l_never")),OPTION({value:5},"5s"),OPTION({value:10},"10s"),OPTION({value:20},"20s"),OPTION({value:60},"1m"),OPTION({value:120},"2m"),OPTION({value:300},"5m"))),DIV({class:"alert alert-info"},A({href:"https://distill.io/settings/actions"},Object(n.a)("Change email action settings from web app!"))))),this.setValues(),this},saveValues:function(){this.$el.find("input,select").each((function(){const e=this;"checkbox"==e.type?o.a.store.Prefs.set(e.name,e.checked):o.a.store.Prefs.set(e.name,e.value)}))},setValues:function(){this.$el.find("input,select").each((function(){const e=this;"checkbox"==e.type?e.checked=o.a.store.Prefs.get(e.name):e.value=o.a.store.Prefs.get(e.name)}))}}),w=c.a.Base.extend({name:"Tone",className:"form-group",events:{"click button.xdel":"event_del","click button.xplay":"event_play"},event_del:function(){this.model.collection.remove(this.model)},event_play:function(){"file"==this.model.get("type")?this.playFile():this.playSrc(this.input.getValue())},getDefaultName:function(e){return e.split(/(\/|\\)/).pop()||"New File"},onInputChange:function(){const e=this.input.getValue();b.isEmpty(this.label.getValue())&&this.label.setValue(this.getDefaultName(e))},playFile:function(){this.input.field.files?this.playSelectedFile():this.playSavedFile()},playSavedFile:function(){const e=this,t=this.model.get("value");o.a.store.KVStore.findOne(t,(function(t,a){e.playSrc(a.value)}))},playSelectedFile:function(){const e=this,t=this.input.field.files[0];t?D(t,e.playSrc):alert("Please select an audio file before playing it.")},playSrc:function(e){AUDIO({src:e}).play()},postInit:function(){this.label=p.a.create({model:this.model,param:{label:"l_name",name:"label",type:"text"},parent:this}),this.input=p.a.create({model:this.model,param:"url"==this.model.get("type")?{label:"l_url",type:"url",name:"value"}:null!=this.model.get("value")?{type:"static",name:"value"}:{label:"l_file",type:"file",name:"value"},parent:this}),this.listenTo(this.input,"change",this.onInputChange)},render:function(){return this.$el.append(DIV({class:"col-md-3"},this.label.render().el),DIV({class:"col-md-6"},this.input.render().el),DIV({class:"col-md-3"},BUTTON({class:"btn btn-default xplay"},Object(n.a)("a_play"))," ",BUTTON({class:"btn btn-default xdel"},I({class:"fa fa-times"})))),"file"==this.model.get("type")&&null==this.model.get("value")&&this.input.field.click(),this}}),O=c.a.Base.extend({name:"actions$errorSect",events:{change:"event_change"},event_change:function(){this.saveValues()},render:function(){const e=b.findWhere(m.a.SieveActionDescList,{type:f.a.ACTION_LOCAL_AUDIO}).params[0].list;return console.log(e),this.$el.attr({id:"errorSect",class:"panel panel-default"}).append(HEADER({class:"panel-heading"},H3(Object(n.a)("Error Actions"))),DIV({class:"panel-body"},DIV({class:"checkbox"},LABEL(INPUT({type:"checkbox",name:"errorAction.enabled"}),Object(n.a)("Trigger notifications"))),DIV({class:"form-group"},Object(n.a)("l_notification_sound"),": ",SELECT({name:"errorAction.sound",style:"width:auto"},e.map((function(e,t){return OPTION({value:e.value},Object(n.a)(e.label))})))),DIV({class:"form-group"},Object(n.a)("Minimum time interval between notifications (in minutes): "),INPUT({type:"number",style:"width: 60px;",name:"errorAction.interval",min:"1"})),DIV({class:"form-group"},Object(n.a)("No. of consecutive errors to trigger notifications"),": ",SELECT({name:"errorAction.minCount",style:"width:auto"},OPTION({value:1},"1"),OPTION({value:2},"2"),OPTION({value:3},"3"),OPTION({value:4},"4"),OPTION({value:5},"5"),OPTION({value:6},"6"),OPTION({value:7},"7"),OPTION({value:8},"8"),OPTION({value:9},"9"),OPTION({value:10},"10"))),DIV({class:"alert alert-info"},Object(n.a)("h_error_notif_desc")))),this.setValues(),this},saveValues:function(){this.$el.find("input,select").each((function(){const e=this;"checkbox"==e.type?o.a.store.Prefs.set(e.name,e.checked):o.a.store.Prefs.set(e.name,e.value)}))},setValues:function(){this.$el.find("input,select").each((function(){const e=this;"checkbox"==e.type?e.checked=o.a.store.Prefs.get(e.name):e.value=o.a.store.Prefs.get(e.name)}))}}),y=c.a.Collection.extend({name:"actions$Tones",actions:{"tones add file":{fn:"action_add_file"},"tones add url":{fn:"action_add_url"},"tones save":{fn:"action_save"}},action_add_file:function(){const e=new g.Model({type:"file"});this.collection.add(e)},action_add_url:function(){const e=new g.Model({type:"url"});this.collection.add(e)},action_save:function(){let e;const t=this;function a(e){return b.map(b.filter(e,(function(e){return"file"==e.type})),(function(e){return e.value}))}r.a.start("save","l_loading"),async.mapSeries(b.values(this.views),(function(t,a){const i=t.model.toJSON(),n=t.input.field.files;!!n&&(e=n[0])?D(e,(function(e){const t="tone:"+md5(e);o.a.store.KVStore.create({id:t,value:e},(function(e,n){i.value=t,a(null,i)}))})):a(null,i)}),(function(e,i){async.parallel([function(e){const t=JSON.stringify(i);o.a.store.KVStore.update("tones",{value:t},(function(a,i){0===i?o.a.store.KVStore.create({id:"tones",value:t},e):e()}))},function(e){const n=a(t.oldTones),s=a(i),l=b.difference(n,s);async.each(l,o.a.store.KVStore.destroy,e)}],(function(e){e?r.a.error(Object(n.a)("e_err")+": "+(e.msg||e.message||e)):(r.a.reset(),t.load())}))}))},addOne:function(e){const t=new w({parent:this,model:e}).render();return this.$list.append(t.el),t},initCollection:function(){this.oldTones=[],this.collection=new g.Collection},load:function(e){const t=this;o.a.store.KVStore.findOne("tones",(function(a,i){a?r.a.error("e_err_unexpected"):i&&(t.oldTones=JSON.parse(i.value),t.collection.reset(t.oldTones)),e&&e(a)}))},renderBase:function(){this.$el.attr({id:"tones",class:"panel panel-default"}).append(HEADER({class:"panel-heading clearfix"},H3({class:"pull-left"},"Tones"),DIV({class:"right"},BUTTON({class:"btn btn-default btn-sm","data-action":"tones add file"},Object(n.a)("a_add_file")),BUTTON({class:"btn btn-default btn-sm","data-action":"tones add url"},Object(n.a)("a_add_url")))),DIV({class:"panel-body"},DIV({class:"xlist"})),DIV({class:"panel-footer"},BUTTON({class:"btn btn-primary","data-action":"tones save"},Object(n.a)("a_save")))),this.$list=this.$el.find(".xlist")}});function D(e,t){const a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)}var x=c.a.ActionProvider.extend({name:"SettingsActions",load:function(e){this.tones.load(e)},postInit:function(){this.common=new v({parent:this}),this.errorSect=new O({parent:this}),this.tones=new y({parent:this})},render:function(){return this.$el.attr({id:"actions",class:"hide"}).append(this.common.render().el,this.errorSect.render().el,this.tones.render().el),this}}),j=a(32);if(!window.jQuery)throw new Error("ADD jQuery");if(!window._)throw new Error("ADD _");var T=c.a.ActionProvider.extend({name:"SettingsClients",events:{"click button":"event_save"},event_save:function(){this.view.onSave()},postInit:function(){this.clients=new h.a.Clients,this.view=new j.a.ClientManager({collection:this.clients,parent:this})},load:function(e){this.clients.fetch({data:{"state.in":[0,30],_opt:{order:["ts"]}},success:e})},render:function(){return this.$el.attr({id:"devices",class:"hide"}).append(DIV({class:"panel panel-default"},HEADER({class:"panel-heading"},H3(Object(n.a)("l_devices"))),DIV({class:"panel-body"},this.view.render().el))),this}});const E=window.jQuery;if(!E)throw new Error("ADD jQuery");if(!window._)throw new Error("ADD _");if(!window.domo)throw new Error("ADD domo");if(!window.Backbone)throw new Error("ADD Backbone");const P=c.a.Base.extend({name:"actions$Common",tagName:"form",events:{change:"event_change"},event_change:function(){this.saveValues()},render:function(){return this.$el.attr({id:"common",class:"panel panel-default"}).append(HEADER({class:"panel-heading"},H3(Object(n.a)("l_advanced"))),DIV({class:"panel-body"},DIV({class:"checkbox"},LABEL(INPUT({type:"checkbox",name:"page.embedded"}),Object(n.a)("m_embedded_opt"))),DIV({class:"form-group"},Object(n.a)("m_max_workers")," ",SELECT({name:"nworkers",style:"width:auto"},OPTION({value:1},1),OPTION({value:2},2),OPTION({value:3},3),OPTION({value:4},4),OPTION({value:5},5),OPTION({value:6},6),OPTION({value:7},7),OPTION({value:8},8),OPTION({value:9},9),OPTION({value:10},10))),DIV({class:"form-group"},Object(n.a)("m_load_page_options")," ",SELECT({name:"x-frame-load-in",style:"width:auto"},OPTION({value:"tab"},Object(n.a)("l_opt_bgtab")),OPTION({value:"window"},Object(n.a)("l_opt_bgwindow")),OPTION({value:"bg"},Object(n.a)("l_opt_force_bg")),OPTION({value:"sticky_window"},Object(n.a)("l_opt_sticky_window")))," ",A({href:"https://distill.io/help/new-tab-chrome-extension"},Object(n.a)("l_learn_more"))),DIV({class:"form-group"},Object(n.a)("m_sticky_window_timeout")," ",INPUT({name:"sticky-window-timeout",type:"number",style:"width:auto"})),DIV({class:"form-group"},DIV({class:"alert alert-info"},Object(n.a)("m_sticky_window_warning"))," "))),this.setValues(),this},saveValues:function(){this.$el.find("input,select").each((function(){const e=this;"checkbox"==e.type?o.a.store.Prefs.set(e.name,e.checked):o.a.store.Prefs.set(e.name,e.value)}))},setValues:function(){this.$el.find("input,select").each((function(){const e=this;"checkbox"==e.type?e.checked=o.a.store.Prefs.get(e.name):e.value=o.a.store.Prefs.get(e.name)}))}}),k=c.a.ActionProvider.extend({name:"SettingsAdvanced",load:function(e){e()},postInit:function(){this.common=new P({parent:this}),this.timing=new $({parent:this})},render:function(){return this.$el.attr({id:"advanced",class:"hide"}).append(this.common.render().el,this.timing.render().el),this}});var $=c.a.Base.extend({name:"TimingSlots",events:{change:"event_change"},postInit:async function(){try{"0"==(await d.a.api("/subscriptions","GET",{"state.in":[40,45]})).data[0].plan_id[0]?E(this.elUnavailable).removeClass("hide"):(E(this.elFormParent).removeClass("hide"),o.a.store.Prefs.get("sieve-slot.enabled")&&E(this.elTimeSlotData).removeClass("hide"))}catch(e){console.log(e),E(this.elUnavailable).removeClass("hide")}},render:function(){return this.$el.attr({id:"errorSect",class:"panel panel-default"}).append(HEADER({class:"panel-heading"},H3(Object(n.a)("l_time_slots"))),DIV({class:"container",style:"width: 100%"},this.elFormParent=DIV({class:"hide"},DIV({class:"row",style:"margin-top: 10px; margin-bottom: 10px;"},DIV({class:"col-sm-12"},DIV({class:"checkbox"},LABEL(this.elSlotEnabled=INPUT({type:"checkbox",name:"sieve-slot.enabled"}),Object(n.a)("l_time_slots_enabled"))))),this.elTimeSlotData=DIV({class:"hide"},DIV({class:"row"},DIV({class:"col-sm-4"},this.formElemStart=DIV({class:"form-group"},Object(n.a)("l_time_slots_start")," ",this.elStartTime=INPUT({name:"sieve-slot.start",type:"time",style:"width: 200px;"}))),DIV({class:"col-sm-4"},this.formElemEnd=DIV({class:"form-group"},Object(n.a)("l_time_slots_end")," ",this.elEndTime=INPUT({name:"sieve-slot.end",type:"time",style:"width: 200px;"}))),DIV({class:"col-sm-4"},this.formElemDays=DIV({class:"form-group"},Object(n.a)("l_time_slots_day")," ",this.elSlotDays=SELECT({name:"sieve-slot.days",id:"slot-days",multiple:!0,style:"width: 200px; height: 120px;"},OPTION({value:1},Object(n.a)("l_monday")),OPTION({value:2},Object(n.a)("l_tuesday")),OPTION({value:3},Object(n.a)("l_wednesday")),OPTION({value:4},Object(n.a)("l_thursday")),OPTION({value:5},Object(n.a)("l_friday")),OPTION({value:6},Object(n.a)("l_saturday")),OPTION({value:0},Object(n.a)("l_sunday")))))),this.elWarningMsg=DIV({class:"form-group"},DIV({class:"alert alert-info"},Object(n.a)("m_day_warning"))," "))),this.elUnavailable=DIV({class:"form-group hide"},DIV({class:"alert alert-info"},Object(n.a)("m_premium_only"))," "))),this.setValues(),this},setValues:function(){this.$el.find("input").each((function(){"checkbox"==this.type?this.checked=o.a.store.Prefs.get(this.name):this.value=o.a.store.Prefs.get(this.name)}));const e=o.a.store.Prefs.get("time-slot-map"),t=Object.keys(e),a=this.$el.find("#slot-days");a.val(t),a.val().length<5?E(this.elWarningMsg).show():E(this.elWarningMsg).hide()},hideForm:function(){E(this.formElemStart).hide(),E(this.formElemEnd).hide(),E(this.formElemDays).hide(),E(this.elWarningMsg).hide()},showForm:function(){E(this.formElemStart).show(),E(this.formElemEnd).show(),E(this.formElemDays).show(),E(this.elWarningMsg).show()},saveValues:function(){this.$el.find("input").each((function(){const e=this;"checkbox"==e.type?o.a.store.Prefs.set(e.name,e.checked):o.a.store.Prefs.set(e.name,e.value)}));const e={},t=this.$el.find("#slot-days").val();for(const a in t){const i=t[a];e[i]=e[i]||[],e[i].push({start:this.elStartTime.value,end:this.elEndTime.value})}o.a.store.Prefs.set("time-slot-map",e)},event_change:function(){const e=this.$el.find("#slot-days");this.elSlotEnabled.checked?E(this.elTimeSlotData).removeClass("hide"):E(this.elTimeSlotData).addClass("hide"),e.val().length<5?E(this.elWarningMsg).show():E(this.elWarningMsg).hide(),this.saveValues()}});var V=k,S=a(56);a(53);const N=window.jQuery;if(!N)throw new Error("ADD jQuery");const C=window.Backbone;if(!C)throw new Error("ADD Backbone");if(!window.async)throw new Error("ADD async");t.default=function(){Object(s.a)();const e={general:u.a.View,actions:x,devices:T,advanced:V};let t;const a={},p=C.Router.extend({routes:{":view":"view"},view:function(i){t&&t.$el.addClass("hide");const n=e[i];if(!n)throw new Error("Unknown setting class:"+i);(t=a[i])||(t=a[i]=new n({parent:f}),f.body.appendChild(t.render().el)),t.load?(r.a.start("load "+i,{info:"l_loading"}),t.load((function(){r.a.stop("load "+i),t.$el.removeClass("hide")}))):t.$el.removeClass("hide"),N("#sidebar a").removeClass("active").parent().find("a[data-action-param="+i+"]").addClass("active")}});var f=new(c.a.RoutedRoot.extend({render:function(){return this.$el.append(DIV({class:"row"},DIV({class:"col-md-3"},DIV({id:"sidebar",class:"list-group"},A({class:"list-group-item",href:"#general","data-action-param":"general"},Object(n.a)("l_general"),I({class:"fa fa-chevron-right right"})),A({class:"list-group-item",href:"#actions","data-action-param":"actions"},Object(n.a)("l_actions"),I({class:"fa fa-chevron-right right"})),A({class:"list-group-item",href:"#devices","data-action-param":"devices"},Object(n.a)("l_devices"),I({class:"fa fa-chevron-right right"})),A({class:"list-group-item",href:"https://distill.io/settings/emails_phones"},Object(n.a)("l_emails_phones"),I({class:"fa fa-chevron-right right"})),A({class:"list-group-item",href:"#advanced","data-action-param":"advanced"},Object(n.a)("l_advanced"),I({class:"fa fa-chevron-right right"})))),this.body=DIV({class:"col-md-9"}))),this}}))({el:N("#content")[0]}).render();N("<div id='x-vsidebar'></div>").appendTo(document.body),Object(i.f)(Object(S.a)(),document.getElementById("x-vsidebar")),N("#x-vsidebar").find('[data-toggle="tooltip"]').tooltip({placement:"right"}),N("#x-vsidebar").find(".vbar-tooltip").tooltip({placement:"right"}),window.App=new p,App.clients=new h.a.Clients,App.clients.defaultId=o.a.store.Prefs.get("client.id"),f.on("child:add child:remove",_.debounce((function(){l.a.Acts.setActions(f.getActions())}),100)),N((function(){d.a.init((function(e,t){if(e)throw r.a.stop("init",{error:{msg:"err:api_load"}}),new Error("Failed to init api subsystem:"+e);r.a.stop("init"),App.clients.fetch({data:{"state.in":[0,30],_opt:{order:["ts"]}}}),C.history.start({root:ROUTE_ROOT,pushState:PUSH_STATE}),r.a.showHelp()}))}))}},51:function(e,t,a){"use strict";var i=a(0);const n=window.jQuery;if(!n)throw new Error("ADD jQuery");t.a=function(){n("[data-placeholder]").each((function(){this.placeholder=Object(i.a)(this.getAttribute("data-placeholder"))})),n("[data-text]").each((function(){this.textContent=Object(i.a)(this.getAttribute("data-text"))})),n("[data-title]").each((function(){this.title=Object(i.a)(this.getAttribute("data-title"))}))}},53:function(e,t,a){"use strict";const i=a(2).a.CFG.URL.ROOT;t.a={api:`${i}/api/v1`,static:"/ui",error_reporter:"https://reporter.distillweb.net",error_reporter_local:"error-reporter-local",website:"https://distill.io",watchlist:"/ui/inbox.html#inbox",template:"/ui/inbox.html#tpls",availability:`${i}/analytics/availability`,settings:"/ui/settings.html#general",billing:`${i}/settings/billing`,login:`${i}/service-login?redirect=app://ui/inbox.html#inbox`,logout:`${i}/logout`}},54:function(e,t,a){"use strict";var i=a(0),n=a(4),s=a(5);const o=window._;if(!o)throw new Error("ADD _");const l=window.Backbone;if(!l)throw new Error("ADD Backbone");const r=window.jQuery;if(!r)throw new Error("ADD jQuery");if(!window.domo)throw new Error("ADD domo");const c=n.a.Base.extend({name:"FeedbackForm",events:{"click button":"send_feedback","change input":"event_change","keypress textarea":"event_change"},event_change:function(e){o.defer(()=>{let{name:t,value:a}=e.target;a=a.trim(),this.model.set(t,a)})},send_feedback:function(e){e.preventDefault();const t=this.model.get("message"),a=this.model.get("emotion"),i=document.URL;t&&(s.a.api("/feedbacks","POST",{message:t,emotion:a,context:i},(function(e){})),r(this.form).addClass("hide").removeClass("form"),r(this.success).removeClass("hide"),window.setTimeout(()=>{this.hide()},2e3),this.model.set({message:"",emotion:"😀"}))},hide:function(){r(window).off("mousedown",this.onAClick).off("keypress",this.onKeyup),this.remove()},removeChildren:function(){o.each(this.children.slice(0),(function(e){e.remove(),this.trigger("child:remove")}),this)},onAClick:function(e){const t=e.target;!r.contains(document.documentElement,t)&&document.documentElement!=t||r.contains(this.form,t)||this.hide()},onKeyup:function(e){console.log(e.keyCode),27==e.keyCode&&this.hide()},postInit:function(){o.defer((function(e){r(window).mousedown(e.onAClick).keyup(e.onKeyup)}),this)},render:function(){return this.$el.append(DIV({class:"popover",style:"display: flex;\n        flex-wrap:wrap;\n        text-align:center;\n        top: auto;\n        left: 60px;\n        bottom: 50px;\n        width: 300px"},this.form=FORM({class:"form",role:"form"},TEXTAREA({type:"text",name:"message",placeholder:Object(i.a)("m_send_feedback"),style:"width: 100%; height: 120px; padding: 5px 10px 10px"},this.model.get("message")||""),DIV({style:"margin:0px 0px 2px 0px; width:auto;",class:"btn-group btn-group-toggle","data-toggle":"buttons"},o.map([{emo:"😀",title:Object(i.a)("l_happy")},{emo:"🤔",title:Object(i.a)("l_suggestion")},{emo:"☹",title:Object(i.a)("l_sad")},{emo:"🙄",title:Object(i.a)("l_confused")},{emo:"😡",title:Object(i.a)("l_dissatisfied")}],e=>LABEL({class:"btn btn-secondary "+(e.emo==this.model.get("emotion")?"active":""),title:e.title},INPUT({type:"radio",value:e.emo,name:"emotion"}),e.emo))),BUTTON({type:"submit",class:"btn btn-primary pull-right ",style:"min-width:0"},Object(i.a)("a_send"))),this.success=DIV({class:"hide",style:"width:100%; ma-width: 30%; margin:20% 30%; "},Object(i.a)("m_thank_you"),"       😀"))),this.focus(),this}}),d=n.a.Base.extend({name:"FeedbackAnchor",events:{"click a":"event_click"},postInit:function(){this.model=new l.Model({emotion:"😀"})},event_click:function(){const e=new c({model:this.model,parent:this}).render();r(this.popoverCt).append(e.el)},render:function(){return this.$el.append(A({class:"ripple",id:"feedAnchor",href:"#","data-toggle":"tooltip","data-html":"true",title:"<b>Feedback</b>"},I({class:"fa fa-comment","aria-hidden":"true"})),this.popoverCt=DIV({id:"feedPop"})),this}});t.a={FeedbackAnchor:d}},55:function(e,t,a){"use strict";var i=a(2),n=(a(0),a(6)),s=a(4),o=[{locale:"en-US",label:"English (US)"},{locale:"de",label:"Deutsch"},{locale:"fr",label:"Français"},{locale:"ru",label:"Русский"},{locale:"ja",label:"日本語"},{locale:"zh",label:"简体中文"},{locale:"es",label:"Español"},{locale:"it",label:"Italiano"},{locale:"pl",label:"Polskie"},{locale:"pt",label:"Português do Brasil"},{locale:"sr",label:"Српски"}],l=a(5);const r=window._;if(!r)throw new Error("ADD _");if(!window.jQuery)throw new Error("ADD jQuery");const c=window.location,d=s.a.Dropdown.extend({getLocale:function(){return USER&&USER.locale||LOCALE},getLabel:function(e){return r.findWhere(o,{locale:e}).label},postInit:function(e){this.menu=new s.a.Menu({items:r.map(o,(function(e){return{label:e.label,data:{locale:e.locale}}}))}),this.menu.on("click",this.onClick),this.setLabel(""),this.$el.attr({"data-toggle":"tooltip","data-html":"true",title:"<b>Language</b>"})},onClick:function(e){const t=e.locale;if(n.a.agents.local){const e=i.a.auth.getId();i.a.store.Prefs.set("locale",t),e?l.a.api("/users","PUT",{id:e,locale:t},(function(){i.a.service.SyncMan._syncStore(i.a.store.UserStore,(function(){c.reload()}))})):c.reload()}else USER&&l.a.api("/users","PUT",{locale:t},(function(){c.reload()}));return!0},renderAction:function(){return A({class:"ripple vbar-tooltip",href:"#","data-toggle":"dropdown","data-html":"true"},I({class:"fa fa-language","aria-hidden":"true"}))}});t.a=d},56:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var i=a(2),n=a(6),s=a(7),o=a(54),l=a(55),r=a(0),c=a(53);let d,h,u,p,f,m,b=e=>e;window._;if(!window.jQuery)throw new Error("ADD jQuery");const g=(new l.a).render(),v=(new o.a.FeedbackAnchor).render();function w(e){n.a.agents.local&&(e.preventDefault(),i.a.auth.logout(),location.href=c.a.logout)}function _(){return Object(s.b)(d||(d=b`
    <div class='vbar'>
        <a class='xripple xside-logo' target="_blank" rel="noopener" href='${0}' data-toggle="tooltip" data-html="true" title="<b>Distill.io</b>"><img height=38 alt='distill-logo' src='${0}/img/distill_logo_inverted.svg'/></a>
        <a class='xripple' href='${0}' data-toggle="tooltip" data-html="true" title="<b>Watchlist</b>"><i class="fa fa-list" aria-hidden="true"></i></a>
        <a class='xripple' href='${0}' data-toggle="tooltip" data-html="true" title="<b>Analytics</b>"><i class="fa fa-bar-chart-o" aria-hidden="true"></i></a>
        <a class='xripple' href='${0}' data-toggle="tooltip" data-html="true" title="<b>Templates</b>"><i class="fa fa-file-text" aria-hidden="true"></i></a>
        ${0}
        <i style='flex: 1'></i>
        ${0}
        ${0}
        <div class='dropdown' data-toggle="tooltip" data-html="true" title="<b>Settings</b>">
            <a class='xripple vbar-tooltip dropdown-toggle' data-toggle="dropdown" href='#'>
              <i class="fa fa-cog" aria-hidden="true"></i>
            </a>
            <ul class='dropdown-menu' role='menu'>
              ${0}
              <li class='divider'></li>
              <li><a target="_blank" rel="noopener" href="https://distill.io/kb/">${0}</a></li>
              <li role='presentation'><a href="${0}" role='menuitem'>${0}</a></li>
              ${0}
              ${0}
            </ul>
        </div>
    </div>
  `),c.a.website,c.a.static,c.a.watchlist,c.a.availability,c.a.template,USER.account_id?Object(s.b)(h||(h=b`
            <a class='xripple' href='/groups/' data-toggle="tooltip" data-html="true" title="<b>Manage Teams</b>">
              <i class="fa fa-users" aria-hidden="true"></i>
            </a>`)):"",v.el,g.el,USER.name?Object(s.b)(u||(u=b`
                  <li class='logout' role='presentation'><a href=${0} @click=${0} role='menuitem'>${0} (<em>${0}</em>)</a></li>
                `),c.a.logout,w,Object(r.a)("a_sign_out"),USER.name):Object(s.b)(p||(p=b`
                  <li class='login' role='presentation'><a href=${0} role='menuitem'>${0}</a></li>
                `),c.a.login,Object(r.a)("a_signin")),Object(r.a)("l_support"),c.a.settings,Object(r.a)("l_settings"),USER.account_id?"":Object(s.b)(f||(f=b`<li role='presentation'><a href="${0}" target="_blank" role='menuitem'>${0}</a></li>`),c.a.billing,Object(r.a)("l_billing")),"admin"==USER.role?Object(s.b)(m||(m=b`<li role='presentation'><a href="/admin/users" role='menuitem'>${0}</a></li>`),Object(r.a)("l_admin")):"")}}}]);
//# sourceMappingURL=13.js.map