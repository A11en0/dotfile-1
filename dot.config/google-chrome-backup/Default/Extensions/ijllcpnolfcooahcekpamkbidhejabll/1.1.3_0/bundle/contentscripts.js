webpackJsonp([3],{0:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(){var e=!0,t=!1,r=void 0;try{for(var n,o=S.storage.option.blacklist[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;if(""==i.trim()||i.startsWith("http")){if(location.href==i){H=!0;break}}else if(location.hostname.includes(i)){H=!0;break}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}return H}function a(){var e=!0;if(0==S.storage.option.preload)e=!1;else if(S.storage.option.preload){var t=!0,r=!1,n=void 0;try{for(var o,i=S.storage.option.lazyload[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(""==a.trim()||a.startsWith("http")){if(location.href==a){e=!1;break}}else if(location.hostname.includes(a)){e=!1;break}}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}return e}function s(){E.Bind([S.storage.focus.shortcuts.toLowerCase()],l),E.Bind([S.storage.read.shortcuts.toLowerCase()],c),E.ListenESC(function(e){"esc"==e&&S.storage.option.esc&&(k.Exist()&&k.Exit(),!k.Exist()&&y.focus.Exist()&&y.focus.Exit(),!k.Exist()&&w.Exist()&&w.Exit())})}function l(){u(y.focus,w,"阅读","聚焦")&&I.Verify(function(e,t){if(e)(new b.default).Render("配置文件已更新，刷新当前页面后才能生效。","刷新",function(){return window.location.reload()});else{if(d(S.STORAGE_MODE.focus),S.storage.current.site.name.startsWith("txtread:"))return void(new b.default).Render("当前为 <a href='http://ksria.com/simpread/docs/#/TXT-阅读器' target='_blank'>TXT 阅读器模式</a>，并不能使用设定功能。");"temp"==D.state&&D.dom?y.focus.Render($(D.dom),S.storage.current.bgcolor):y.focus.GetFocus(D.Include(),S.storage.current.site.include).done(function(e){"none"==S.storage.pr.state&&D.TempMode(S.STORAGE_MODE.focus,e[0]),y.focus.Render(e,S.storage.current.bgcolor)}).fail(function(){(new b.default).Render(2,"当前并未获取任何正文，请重新选取。")})}})}function c(){u(w,y.focus,"聚焦","阅读")&&I.Verify(function(e,t){e?(new b.default).Render("配置文件已更新，刷新当前页面后才能生效。","刷新",function(){return window.location.reload()}):(d(S.STORAGE_MODE.read),""!=S.storage.current.site.name?w.Render():"temp"==D.state&&D.dom?w.Render():((new b.default).Render("<a href='http://ksria.com/simpread/docs/#/词法分析引擎?id=智能感知' target='_blank' >智能感知</a> 正文失败，请移动鼠标，并通过 <a href='http://ksria.com/simpread/docs/#/手动框选' target='_blank' >手动框选</a> 的方式生成正文。"),w.Highlight().done(function(e){var t=function(t){D.TempMode(S.STORAGE_MODE.read,e),w.Render()};S.storage.current.highlight?C.Control(e).done(function(e){t(e)}):t(e)})))})}function p(){if(d(S.STORAGE_MODE.read),window.location.href.includes("simpread_mode=read")||S.storage.current.auto&&M.Exclusion(z.Plugin("minimatch"),S.storage.current)||!S.storage.current.auto&&M.Whitelist(z.Plugin("minimatch"),S.storage.current))switch(S.storage.current.site.name){case"my.oschina.net":case"36kr.com":case"chiphell.com":case"question.zhihu.com":$(function(){return c()});break;case"post.juejin.im":case"entry.juejin.im":setTimeout(function(){return c()},2500);break;case"kancloud.cn":case"sspai.com":setTimeout(function(){return c()},1e3);break;default:"adapter"==D.state&&c()}}function u(e,t){return t.Exist(!1)?((new b.default).Render("请先退出"+(arguments.length<=2?void 0:arguments[2])+"模式，才能进入"+(arguments.length<=3?void 0:arguments[3])+"模式。"),!1):!e.Exist(!0)}function d(e){e&&S.storage.VerifyCur(e)&&((!D||!D.Exist())&&h(),S.storage.Getcur(e,D.current.site))}function f(e){e&&B!=location.href&&(B=location.href,p()),T.browser.runtime.sendMessage(R.Add(R.MESSAGE_ACTION.browser_action,{code:""==S.storage.current.site.name?-1:0,url:window.location.href}))}function h(){D=new L.default(S.storage.sites),D.cleanup=void 0==S.storage.read.cleanup||S.storage.read.cleanup,D.pure=void 0!=S.storage.read.pure&&S.storage.read.pure,D.AddPlugin(z.Plugin()),D.Getsites(),S.storage.puread=D}r(83),r(104),r(57),r(586);var m=r(84),g=(o(m),r(10)),b=o(g),y=r(265),v=r(284),w=n(v),x=r(107),k=n(x),A=r(105),E=n(A),_=r(43),C=n(_),O=r(58),M=n(O),S=r(8),j=r(19),R=n(j),T=r(11),P=r(21),I=n(P),N=r(68),L=o(N),W=r(110),z=n(W),D=void 0,H=!1,B=location.href;$.fn.sreffect=void 0==$.fn.velocity?$.fn.animate:$.fn.velocity,S.storage.Read(function(){i()?$("style").map(function(e,t){(t.innerText.includes("simpread")||t.innerText.includes("sr-opt-focus")||t.innerText.includes("sr-rd-theme")||t.innerText.includes("notify-gp")||t.innerText.includes("md-waves-effect"))&&$(t).remove()}):(s(),a()&&p())}),T.browser.runtime.onMessage.addListener(function(e,t,r){if(!H)switch(e.type){case R.MESSAGE_ACTION.focus_mode:S.storage.option.br_exit&&y.focus.Exist(!1)?y.focus.Exit():l();break;case R.MESSAGE_ACTION.shortcuts:s();break;case R.MESSAGE_ACTION.tab_selected:0==a()?T.browser.runtime.sendMessage(R.Add(R.MESSAGE_ACTION.browser_action,{code:0,url:window.location.href})):f(e.value.is_update);break;case R.MESSAGE_ACTION.read_mode:case R.MESSAGE_ACTION.browser_click:I.Verify(function(e,t){e?(new b.default).Render("配置文件已更新，刷新当前页面后才能生效。","刷新",function(){return window.location.reload()}):S.storage.option.br_exit?(k.Exist()&&k.Exit(),!k.Exist()&&w.Exist(!1)?w.Exit():c()):c()});break;case R.MESSAGE_ACTION.pending_site:(new b.default).Render({content:"是否提交，以便更好地适配此页面？",action:"是的",cancel:"取消",callback:function(e){"cancel"!=e&&T.browser.runtime.sendMessage(R.Add(R.MESSAGE_ACTION.save_site,{url:location.href,site:S.storage.pr.current.site,uid:S.storage.user.uid,type:"failed"}))}});break;case R.MESSAGE_ACTION.menu_whitelist:case R.MESSAGE_ACTION.menu_exclusion:case R.MESSAGE_ACTION.menu_blacklist:case R.MESSAGE_ACTION.menu_unrdist:e.type==R.MESSAGE_ACTION.menu_whitelist?(S.storage.read.whitelist.push(e.value.url),(new b.default).Render("已加入到白名单。")):e.type==R.MESSAGE_ACTION.menu_exclusion?(S.storage.read.exclusion.push(e.value.url),(new b.default).Render("已加入到排除列表。")):e.type==R.MESSAGE_ACTION.menu_blacklist?(S.storage.option.blacklist.push(e.value.url),(new b.default).Render("已加入到黑名单。")):e.type==R.MESSAGE_ACTION.menu_unrdist&&S.storage.UnRead("add",{url:e.value.url,title:$("head").find("title").text(),desc:""},function(e){e&&(new b.default).Render(0,"成功加入未读列表。"),!e&&(new b.default).Render(0,"已加入未读列表，请勿重新加入。")}),S.storage.Write(function(){I.SendMessage("option",!0)})}})},43:function(e,t){"use strict";function r(){var e=void 0,t=$.Deferred(),r=function(t){e?(e.removeClass(a),$(t.target).addClass(a)):$(t.target).addClass(a),e=$(t.target)};return $("html").one("click",function(n){if(e)return $(n.target).removeClass(a),$("html").off("mousemove",r),e=void 0,t.resolve(n.target),!1}),$("html").one("keydown",function(t){if(27==t.keyCode&&e)return $("html").find("."+a).removeClass(a),$("html").off("mousemove",r),e=void 0,t.preventDefault(),!1}),$("html").on("mousemove",r),t}function n(e){var t=void 0,r=function(e){t?(t.removeClass(a),$(e.target).addClass(a)):$(e.target).addClass(a),t=$(e.target)},n=function(t){return e(t.target),!1};$("html").on("click",n),$("html").on("keydown",function(e){if(27==e.keyCode&&t)return $("html").find("."+a).removeClass(a),$("html").off("mousemove",r),$("html").off("click",n),t=void 0,e.preventDefault(),!1}),$("html").on("mousemove",r)}function o(){var e=$.Deferred();return $("html").one("mouseup",function(t){var r=void 0;window.getSelection?r=window.getSelection():document.selection&&(r=document.selection.createRange());var n=r;r.text&&(n=r.text),""!=n&&(n=""+n,window.getSelection().removeAllRanges(),e.resolve(n))}),e}function i(e){var t=$(e),r=$.Deferred(),n='<simpread-highlight>\n                        <sr-highlight-ctl class="add"><svg t="1560496884701" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M876.089 439.182h-291.271v-291.271c0-40.268-32.549-72.818-72.818-72.818s-72.818 32.549-72.818 72.818v291.271h-291.271c-40.268 0-72.818 32.549-72.818 72.818s32.549 72.818 72.818 72.818h291.271v291.271c0 40.268 32.549 72.818 72.818 72.818s72.818-32.549 72.818-72.818v-291.271h291.271c40.268 0 72.818-32.549 72.818-72.818s-32.549-72.818-72.818-72.818z" p-id="1998" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="sub"><svg t="1560496679351" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M127.289058 490.154459l0 43.770899c0 32.338522 27.009144 57.108672 58.774615 58.734706 0 0 132.448568 13.021571 325.936327 13.021571s325.936327-13.021571 325.936327-13.021571c31.765471-1.626034 58.774615-26.396183 58.774615-58.734706l0-43.770899c0-32.338522-26.51591-57.068763-58.774615-58.734706 0 0-128.005372-12.005428-325.942467-12.005428s-325.930187 12.005428-325.930187 12.005428C153.804968 433.085696 127.289058 457.815937 127.289058 490.154459z" p-id="3204" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="done"><svg t="1560496955945" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M416.832 798.08C400.64 798.08 384.512 791.872 372.16 779.52L119.424 525.76C94.784 500.992 94.784 460.8 119.424 436.032 144.128 411.264 184.128 411.264 208.768 436.032L416.832 644.928 814.4 245.76C839.04 220.928 879.04 220.928 903.744 245.76 928.384 270.528 928.384 310.656 903.744 335.424L461.504 779.52C449.152 791.872 432.96 798.08 416.832 798.08Z" p-id="1755" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="none"><svg t="1560499513561" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M649.179 512l212.839-212.84c37.881-37.881 37.881-99.298 0-137.179s-99.298-37.881-137.179 0L512 374.821l-212.839-212.84c-37.881-37.881-99.298-37.881-137.179 0s-37.881 99.298 0 137.179L374.821 512 161.982 724.84c-37.881 37.881-37.881 99.297 0 137.179 18.94 18.94 43.765 28.41 68.589 28.41 24.825 0 49.649-9.47 68.589-28.41L512 649.179l212.839 212.84c18.94 18.94 43.765 28.41 68.589 28.41s49.649-9.47 68.59-28.41c37.881-37.882 37.881-99.298 0-137.179L649.179 512z" p-id="1990" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="help"><svg t="1560573280563" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M512 958.326255c247.255337 0 447.696462-200.441125 447.696462-447.696462s-200.441125-447.696462-447.696462-447.696462-447.696462 200.441125-447.696462 447.696462S264.74364 958.326255 512 958.326255zM512 217.681788c35.32146 0 63.956637 28.635177 63.956637 63.956637 0 35.323507-28.635177 63.956637-63.956637 63.956637s-63.956637-28.633131-63.956637-63.956637C448.043363 246.316965 476.67854 217.681788 512 217.681788zM448.043363 510.629793c0-35.32146 28.635177-63.956637 63.956637-63.956637s63.956637 28.635177 63.956637 63.956637l0 223.848231c0 35.323507-28.635177 63.956637-63.956637 63.956637s-63.956637-28.633131-63.956637-63.956637L448.043363 510.629793z" p-id="1979" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                  </simpread-highlight>';return t.addClass("simpread-highlight-controlbar"),$("html").append(n),$("html").find("sr-highlight-ctl").on("click",function(e){var n=$(e.currentTarget).attr("class");if("add"==n)t.removeClass("simpread-highlight-controlbar"),t=t.parent(),t.addClass("simpread-highlight-controlbar");else if("sub"==n)t.removeClass("simpread-highlight-controlbar"),t=$(t.children()[0]),t.addClass("simpread-highlight-controlbar");else if("none"==n)t.removeClass("simpread-highlight-controlbar"),$("simpread-highlight").remove();else if("help"==n){var o=$('<a style="display:none" target="_blank" href="http://ksria.com/simpread/docs/#/手动框选"></a>').appendTo("body");o[0].click(),o.remove()}else t.removeClass("simpread-highlight-controlbar"),$("simpread-highlight").remove(),r.resolve(t[0])}),r}Object.defineProperty(t,"__esModule",{value:!0});var a="simpread-highlight-selector";t.Start=r,t.Multi=n,t.Annotate=o,t.Control=i},54:function(e,t,r){t=e.exports=r(5)(),t.push([e.id,"notify-gp{font:300 14px -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;position:fixed;top:0;right:0;margin:0 15px 0 0;padding:0;text-transform:none;pointer-events:none}notify-gp notify{display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;margin-top:15px;padding:14px 24px;min-width:288px;max-width:568px;height:48px;max-height:48px;color:hsla(0,0%,100%,.7);background-color:#323232;box-sizing:border-box;border-radius:4px;pointer-events:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:left top 0;transform-origin:left top 0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms,-webkit-transform .45s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms,-webkit-transform .45s cubic-bezier(.23,1,.32,1) 0ms;transition:transform .45s cubic-bezier(.23,1,.32,1) 0ms,opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:transform .45s cubic-bezier(.23,1,.32,1) 0ms,opacity 1s cubic-bezier(.23,1,.32,1) 0ms,-webkit-transform .45s cubic-bezier(.23,1,.32,1) 0ms;box-shadow:0 1px 3px 0 rgba(60,64,67,.302),0 4px 8px 3px rgba(60,64,67,.149)}notify-gp notify-title{font-size:13px;font-weight:700}notify-gp notify-content{display:block;font-size:14px;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}notify-gp notify-content a,notify-gp notify-content a:active,notify-gp notify-content a:link,notify-gp notify-content a:visited{margin:inherit;padding-bottom:5px;color:#fff;font-size:inherit;text-decoration:none;-webkit-transition:color .5s;transition:color .5s}notify-gp notify-content a:hover{margin:0;margin:initial;padding:0;padding:initial;color:inherit;font-size:inherit;text-decoration:none}notify-gp notify-i{display:none;margin:0 10px 0 0;width:24px;height:24px;background-position:50%;background-repeat:no-repeat}notify-gp notify-action,notify-gp notify-cancel{display:none;margin:0 0 0 24px;max-width:80px;min-width:56px;color:#8ab4f8;font-weight:500;font-size:inherit;text-transform:uppercase;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}notify-gp notify-cancel{margin:0}notify-gp notify-a{display:block;position:absolute;top:5px;right:5px;cursor:pointer}notify-gp notify-a notify-span{display:block;width:16px;height:16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABpFBMVEUAAADl5eXj4+NSVFRTVVVaXFxLTU1hY2NdX18pLCwhJCSdnp5sbm6HiYmjpKSDhYX///+rrKytrq6XmJgzNTUoKyt3eXlydHRlZ2dbXV1ucHB4enrv7++KjIyIiort7e1oamosLy8aHR0VGBgUFxcbHh4rLi5oamprbGwgIyMKDQ0KDQ0iJSVjZWWfoaEkJiYICwsLDg4KDQ0MDw8iJSWMjo41ODgMDw8JDAw2OTkvMTELDg4LDg4xMzM1NzcJDAwLDg40NjYeISEHCgoeISFkZmYtLy8yNDRvcXEWGRkHCgoaHR3///8RFBQHCgohJCShoqLIyMgaHR0HCgoZGxv4+PgRFBQLDg4xMzOWl5eam5ssLi4bHh7///8fIiIJDAwwMzNzdHQXGhoeISFlZmYsLi4KDQ0gIiI6PDwOEREuMDAXGhoHCgodHx8pLCwNEBA1ODj///8nKSkICwsICwsJDAwnKSnZ2dl9fn4pKysNDw8OEREpLCxyc3ORkpIzNTUjJSUVGBgUFxcgIyM5PDyanJwEBwcDBwcDBgYFCAgGCQn///+5RDDmAAAAhnRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQUFAQU+i7S0jkAGEYrw8Y8SBIn++Pr3jQQ67fx8dvX6iWr27z+B/YsOcoMPdPiEAaL7iAgEcfWsA6D7iAkGcawDef2LDnOFD3T4gTLnfHb6iWrqNQJ4+ff7fQILd+ToewsCLHWZmXUwAyFsKwcAAAABYktHRBCVsg0sAAAAzElEQVQY02NgwAoYZWTl5JngXGYFRSVlFVU1dRYIn1VDU6sNCLR1dNlAfHY9fQNDw/YOI2MDE1MOoACnmbmFpZW1ja2dvYMjFwMDN4NTp7OLq5u7h6dXpzcDDwOvj29bm59/QGBQcFtbSCgfA79AWFtHeERkVLR1W1tMrCCDEENcZ3xCYlJySmpaZzqDMAODSEamRVZ2cE5unn1+gSjQFrHCIqNir7a2nJLSsnJxkEMkKiqrutrauqpraiUhTpWqq29obGpuaZVmIAYAAO06McffKEk8AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDEzLTA0LTAzVDE3OjE4OjAzKzA4OjAwRdgB9wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxMS0wNS0xOFQyMDowMTowMCswODowMB0r3XkAAABNdEVYdHNvZnR3YXJlAEltYWdlTWFnaWNrIDYuOC44LTcgUTE2IHg4Nl82NCAyMDE0LTAyLTI4IGh0dHA6Ly93d3cuaW1hZ2VtYWdpY2sub3JnWaRffwAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQAMTI4Q3xBgAAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxMjjQjRHdAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADEzMDU3MjAwNjArP9HVAAAAE3RFWHRUaHVtYjo6U2l6ZQAxLjAzS0JCZtQvXwAAAFx0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL2hvbWUvZnRwLzE1MjAvZWFzeWljb24uY24vZWFzeWljb24uY24vY2RuLWltZy5lYXN5aWNvbi5jbi9wbmcvMTcvMTc4Ni5wbmcRsze7AAAAAElFTkSuQmCC)}notify-gp notify-i.holdon{display:block;margin:0 0 0 24px;width:20px;height:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAQAAAAngNWGAAAATUlEQVR4AWMYSuB/4P+V/1lRRFiBIoEYCoGC//+vAypFKFsHFFkJV4AsAVGKzsOjFFUZHqUElCGUwpRRrpCw1YQ9Qzh4SA5wwlE4hAAAiFGQefYhNJkAAAAASUVORK5CYII=);cursor:pointer}notify-gp .notify-show{opacity:1;-webkit-transform:scaleY(1);transform:scaleY(1)}notify-gp .notify-hide{opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}notify-gp .notify-success{color:rgba(118,255,3,.8)}notify-gp .notify-warning{color:#ffee58}notify-gp .notify-error{color:#ef5350}notify-gp .notify-modal{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;height:auto;max-height:200px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)}notify-gp .notify-modal .notify-modal-content{margin-top:5px;font-size:13px;white-space:normal}notify-gp .notify-modal .notify-modal-content a{margin:0;padding:0;color:inherit;font-size:inherit;text-decoration:underline;cursor:pointer}notify-gp .notify-modal .notify-modal-content a:active,notify-gp .notify-modal .notify-modal-content a:focus,notify-gp .notify-modal .notify-modal-content a:hover,notify-gp .notify-modal .notify-modal-content a:visited{color:inherit}notify-gp .notify-snackbar{position:fixed;bottom:0;left:50%;margin-bottom:5px;-webkit-transform-origin:left bottom 0;transform-origin:left bottom 0}.notify-position-lt-corner{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:0 0 0 15px;left:0;right:auto}.notify-position-lb-corner{margin:0 0 15px 15px;right:auto;left:0}.notify-position-lb-corner,.notify-position-rb-corner{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-flow:column-reverse wrap-reverse;flex-flow:column-reverse wrap-reverse;top:auto;bottom:0}.notify-position-rb-corner{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:0 15px 15px 0;left:auto;right:0}",""])},57:function(e,t,r){var n=r(54);"string"==typeof n&&(n=[[e.id,n,""]]),r(6)(n,{}),n.locals&&(e.exports=n.locals)},65:function(e,t,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){if("user"==e){var t="0123456789abcdefghijklmnopqrstuvwxyz",r=(0,y.default)(t,8),n=(0,y.default)(t,4),o=(0,y.default)(t,4),i=(0,y.default)(t,4),a=(0,y.default)(t,12);return r+"-"+n+"-"+o+"-"+i+"-"+a}return"plugin"==e?(0,y.default)("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",10):"site"==e?(0,y.default)("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",10):void 0}function s(e,t,r){t=e?"https://simpread.ksria.cn/plugins/srplug/"+e+".srplug":t,t+="?"+ +new Date,$.ajax({url:t,dataType:"json"}).done(function(e){return r(e,void 0)}).fail(function(){return r(void 0,"error")})}function l(e,t){window.dispatchEvent(new CustomEvent("simpread-plugin",{detail:{type:e,value:t}}))}function c(t,r,n){try{if(0==n.enable)return;if(n.run_at!=t)return;if(""!=n.site&&!n.site.split(",").includes(r))return;new Function(p(n.script))(),""!=n.style&&h(n.style)}catch(t){(new e).Render(2,"插件 "+n.name+' 运行时出错，可以的话，请 <a href="https://github.com/Kenshin/simpread/issues/new" target="_blank">提交此问题</a> 😁')}}function p(t){return window.Notify=e,window.browser=v.browser,window.current=(0,w.Clone)(w.storage.current),window.read=(0,w.Clone)(w.storage.read),window.highlight=k,window.db=u,window.control=d,window.SRSave=f,"( function ( $$version, $read, $title, $desc, $content, $footer, $process, $toc, Notify, $$highlight, browser, $$storage, $$current, $$read, $$control, $$save ) {\n        "+t+'\n    })( "0.0.2", $( "sr-read" ), $( "sr-rd-title" ), $( "sr-rd-desc" ), $( "sr-rd-content" ), $( "sr-rd-footer" ), $( "read-process" ), $( "toc" ), Notify, highlight, browser, db, current, read, control, SRSave );'}function u(e,t,r){t?v.browser.storage.local.set(i({},"plugin-"+e,t),function(){r&&r()}):v.browser.storage.local.get(["plugin-"+e],function(e){r&&r(e)})}function d(e,t){t?_&&window.addEventListener("simpread-plugin_controlbar",function(e){t(e)}):window.dispatchEvent(new CustomEvent("simpread-plugin_controlbar",{detail:{type:e}})),_=!1}function f(e,t){return e?void w.storage.Write(function(){E.SendMessage("option",!0),t()},w.storage.simpread):{focus:w.storage.focus,read:w.storage.read,option:w.storage.option,version:w.storage.version}}function h(e){$("head").append('<style type="text/css">'+e+"</style>")}function m(e){var t=!1;if($("fap action-bar").find("sr-opt-label").map(function(r,n){"插件触发器"==$(n).text()&&(t=!0,$(n).next().append(e))}),0==t){var r='<sr-opt-gp>\n                        <sr-opt-label>插件触发器</sr-opt-label>\n                        <actions style="display:flex;margin:10px 0;flex-wrap:wrap;">\n                            '+e+"\n                        </actions>\n                      </sr-opt-gp>";$("fap action-bar").append(r)}}function g(t,r,n){t&&h(t()),r&&r("0.0.2",$("sr-read"),$("sr-rd-title"),$("sr-rd-desc"),$("sr-rd-content"),$("sr-rd-footer"),$("read-process"),$("toc"),e,k,v.browser,u,w.storage.current,w.storage.read,d,f),n&&m(n())}Object.defineProperty(t,"__esModule",{value:!0}),t.Controlbar=t.Event=t.ID=t.Exec=t.Install=void 0;var b=r(98),y=o(b),v=r(11),w=r(8),x=r(43),k=n(x),A=r(21),E=n(A),_=!0;window.simpread={testPlugin:g},t.Install=s,t.Exec=c,t.ID=a,t.Event=l,t.Controlbar=d}).call(t,r(10))},68:function(e,t,r){var n,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,s){"object"==i(t)&&"undefined"!=typeof e?e.exports=s():(n=s,o="function"==typeof n?n.call(t,r,t,e):n,!(void 0!==o&&(e.exports=o)))}(void 0,function(){"use strict";function e(e){return $.extend(!0,{},e)}function t(e){if(document){var t=document.createElement("a");return t.href=e,t}var r=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return r&&{href:e,protocol:r[1],host:r[2],hostname:r[3],port:r[4],pathname:r[5],search:r[6],hash:r[7]}}function r(e){if(""==e)return[0,e];if(o(e))return[2,e];var t=e.match(/<\S+ (class|id)=("|')?[\w-_=;:' ]+("|')?>?$|<[^\/][-_a-zA-Z0-9]+>?$/gi);return t&&t.length>0?[1,t]:[-1,void 0]}function n(e){var t=r(e),n=x(t,2),o=n[0],i=n[1];if(2==o)return e;if(1==o){var a=i[0].trim().replace(/['"<>]/g,"").replace(/ /gi,"=").split("="),s=x(a,3),l=s[0],c=s[1],p=s[2];return c?"class"===c.toLowerCase()?c=l+"."+p:"id"===c.toLowerCase()&&(c=l+"#"+p):c=l,c}return null}function o(e){return/^(\[\[)[\[{`'\/]{1}[ \S]+[}`'\/\]]\]\]{1}($)/g.test(e)}function a(e){var t=[e.replace(/(^)\[\[|\]\]$/g,"")],r=t[0],n=t[1];switch(r[0]){case"{":r=r.replace(/^{|}$/g,""),e=new Function("return "+r)(),n=0;break;case"'":e=(e=r.replace(/^'|'$/g,"")).match(/^<[a-zA-Z0-9_-]+>/g).join("").replace(/<|>/g,"")+":contains("+e.replace(/<[\/a-zA-Z0-9_-]+>/g,"")+")",n=1;break;case"/":e=r.replace(/^\/|\/$/g,"").replace(/\\{2}/g,"\\").replace(/'/g,'"'),n=2;break;case"[":r=r.replace(/^{|}$/g,""),e=new Function("return "+r)()[0],n=3;break;case"`":r=l(r=r.replace(/^`|`$/g,"")),e=$(r),n=4;break;default:n=-1}return[e,n]}function s(e){try{if(""!=e.id)return void 0==e.id?"":"//*[@id='"+e.id+"']";if(e===document.body)return"/html[1]/"+e.tagName.toLowerCase();for(var t=0,r=e.parentNode.childNodes,n=0;n<r.length;n++){var o=r[n];if(o===e)return s(e.parentNode)+"/"+e.tagName.toLowerCase()+"["+(t+1)+"]";1===o.nodeType&&o.tagName===e.tagName&&t++}}catch(e){return""}}function l(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function c(){var e=$("body"),t=!0,r=!1,n=void 0;try{for(var o,i=["[itemprop='articleBody']","article",".post-content",".entry-content",".post-article",".content-post",".article-entry",".article-content",".article-body",".markdown-body",".post",".content"][Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=e.find(a);if(s.length>0)return s}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return-1}function p(){var e=document.location,t=(e.href,e.host,e.protocol,e.host,e.protocol.substr(0,e.protocol.indexOf(":")),e.protocol,e.host,e.pathname.substr(0,e.pathname.lastIndexOf("/")+1),new _.Readability(document.cloneNode(!0)).parse());return t}function u(r,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=function(e){var t=e.replace("www.","").match(/\.\S+\.\S+/g);return t?t[0].substr(1):e.replace("www.","")},s=t(O),l=[].concat(k(n.keys())),c=o.match(/[.a-zA-z0-9-_]+/g)[1].replace("www.",""),p=a(s.hostname),u=function(){return"/"==s.pathname||/\/(default|index|portal).[0-9a-zA-Z]+$/.test(s.pathname)},d=!0,f=!1,h=void 0;try{for(var m,g=l[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var b=m.value,y=n.get(b).name,v=a(y);u()||b.endsWith("*")||b.replace(/^http[s]?:/,"")!=o.replace(/^http[s]?:/,"")?b.match(/\*/g)&&1==b.match(/\*/g).length&&!u()&&b.endsWith("*")&&c.includes(v)&&p==v&&o.includes(y)?i.push([b,e(n.get(b)),r]):E(s.origin+s.pathname,b)&&i.push([b,e(n.get(b)),r]):i.push([b,e(n.get(b)),r])}}catch(e){f=!0,h=e}finally{try{!d&&g.return&&g.return()}finally{if(f)throw h}}}function d(e){if(!e.name||!e.url||!e.include)return-1;if(-1==r(e.title)[0]||-1==r(e.include)[0]||-1==r(e.desc)[0])return-2;if(e.paging){if(2!=e.paging.length)return-3;if(!e.paging[0].prev)return-4;if(!e.paging[1].next)return-5;if(-1==r(e.paging[0].prev)[0]||-1==r(e.paging[1].next)[0])return-6}if(e.avatar){if(2!=e.avatar.length)return-7;if(!e.avatar[0].name)return-8;if(!e.avatar[1].url)return-9;if(-1==r(e.avatar[0].name)[0]||-1==r(e.avatar[1].url)[0])return-10}return 0}function f(e){var t=e.replace('<div id="readability-page-1" class="page">',""),r=$(t)[0],n=r.outerHTML.replace(r.innerHTML,""),o=$(n)[0],i=o.tagName.toLowerCase(),a=o.className;return{id:o.id,cls:a,tag:i}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",r=$("html");if(o(e)){var n=a(e),i=x(n,2),s=i[0],l=i[1];0==l?e=s:3==l?e=m(r.find(s)):4==l&&(e=s.html())}else"html"==t?e=m(r.find(e)):"multi"==t||(e=r.find(e).text().trim());return e}function m(e){var t="";switch(e.length){case 0:t="<sr-rd-content-error></sr-rd-content-error>";break;case 1:t=e.html().trim();break;default:t=e.map(function(e,t){return $(t).html()}).get().join("<br>")}return t}var g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},w=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=("undefined"==typeof t?"undefined":i(t))&&"function"!=typeof t?e:t},x=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},A={url:"",target:"",matching:[],name:"",title:"",desc:"",exclude:[],include:"",avatar:[],paging:[]},E=void 0,_=void 0,C=void 0,O=void 0,M=function(){function r(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:[],custom:[],local:[]};g(this,r),this.url=(t=(e="/"!=(e=window.location.pathname)&&e.endsWith("/")?e=e.replace(/\/$/,""):e).replace(/\/[%@#.~a-zA-Z0-9_-]+$|^\/$/g,""),window.location.protocol+"//"+window.location.hostname+t+"/"),this.sites=n,this.current={},this.state="none",this.origins=[],this.mathjax=void 0,O=location.href}return b(r,[{key:"SetURL",value:function(e){var r,n=t(e),o=(r="/"!=(r=n.pathname)&&r.endsWith("/")?r=r.replace(/\/$/,""):r).replace(/\/[%@#.~a-zA-Z0-9_-]+$|^\/$/g,"");this.url=n.protocol+"//"+n.hostname+o+"/",O=e}},{key:"SetMinimatch",value:function(e){E=e}},{key:"SetRdability",value:function(e){_=e}},{key:"SetMarkdown",value:function(e){C=e}},{key:"isMathJax",value:function(){var e=this;return void 0==this.mathjax&&(this.mathjax=!1,$("body").find("script").each(function(t,r){r.type.startsWith("math")&&(e.mathjax=!0)})),this.mathjax}},{key:"MathJaxMode",value:function(){var e=c();if(-1!=e)return this.Newsite("read",e[0].outerHTML),this.dom=e[0],this.state="temp",e;var t=p();if(t&&""!=t.content){var r=f(t.content),n=r.id,o=r.cls,i=r.tag;return""!=n?"<"+i+' id="'+n+'">':""!=o?"<"+i+' class="'+o+'">':void 0}}},{key:"Readability",value:function(){try{var t=p();if(!t||""==t.content)throw"Readability error";this.Newsite("read",t.content,t.excerpt);var r=f(t.wrap),n=r.id,o=r.cls,i=r.tag;this.dom=""!=n?$("body").find("#"+n)[0]:""!=o?$("body").find("."+o.replace(/ /gi,"."))[0]:$("body").find(""+i)[0],this.state="temp"}catch(t){var a=c();-1!=a?(this.Newsite("read",a[0].outerHTML),this.dom=a[0],this.state="temp"):this.current.site=e(A)}}},{key:"Getsite",value:function(e,t){return this.sites[e].find(function(e){return e[0]==t})}},{key:"Getsites",value:function(){var e=this,t=[],r=function(){if(E(location.href,"file://**/*.txt")||E(location.href,"http*://**/*.txt"))return function(){var e=location.pathname.split("/").pop(),t="file:"==location.protocol?"local":"remote",r={name:"txtread::"+t,title:"<title>",desc:"",include:"<pre>",auto:!1,exclude:[]};return"remote"==t&&(r.include="",r.html=$("body pre").html().replace(/\n/gi,"<br>")),!$("title").html()&&$("head").append("<title>"+decodeURI(e.replace(".txt",""))+"</title>"),r}();if($($("body").children()[0]).is("pre")&&(E(location.href,"file://**/*.md")||E(location.href,"http*://**/*.md")))return function(){var e=location.pathname.split("/").pop(),t={name:"txtread::"+("file:"==location.protocol?"local":"remote"),title:"<title>",desc:"",include:"",auto:!1,exclude:[]},r=(new C.default.Converter).makeHtml($("body pre").text());return t.html=r,!$("title").html()&&$("head").append("<title>"+decodeURI(e.replace(".md",""))+"</title>"),t}();var e=/<\S+ (class|id)=("|')?[\w-_=;:' ]+("|')?>?$|<[^\/][-_a-zA-Z0-9]+>?$/gi,t={name:$("meta[name='simpread:name']").attr("content"),
url:$("meta[name='simpread:url']").attr("content"),title:$("meta[name='simpread:title']").attr("content"),desc:$("meta[name='simpread:desc']").attr("content"),include:$("meta[name='simpread:include']").attr("content"),exp:$("meta[name='simpread:exclude']").attr("content"),auto:$("meta[name='simpread:auto']").attr("content"),exclude:[]};if(t.name&&t.include){if(t.url&&!E(location.href,t.url))return;!t.title&&(t.title="<title>"),!t.desc&&(t.desc=""),!t.exp&&(t.exp=""),t.name="metaread::"+t.name,t.auto="true"==t.auto;var r=["title","desc","include","exp"].findIndex(function(r){return""!=t[r]&&!t[r].match(e)});return t.exclude.push(t.exp),delete t.exp,-1==r?t:void 0}}();if(this.current.url=this.url,r)this.current.auto=r.auto,this.current.url=r.url,delete r.auto,delete r.url,this.current.site=y({},r),this.current.site.name.startsWith("metaread::")&&(this.state="meta"),this.current.site.name.startsWith("txtread::")&&(this.state="txt");else if(u("local",new Map(this.sites.local),this.url,t),u("global",new Map(this.sites.global),this.url,t),u("person",new Map(this.sites.person),this.url,t),u("custom",new Map(this.sites.custom),this.url,t),t.length>0){var n=void 0;if(t.forEach(function(t){t[1].active&&(n=t,e.current.url=n[0],e.current.site=e.Safesite(y({},n[1]),n[2],n[0]),e.state="adapter")}),!n){var o=t[0];o[1].active=!0,this.current.url=o[0],this.current.site=this.Safesite(y({},o[1]),o[2],o[0]),this.state="adapter"}}else{var i=function(){if(location.pathname.includes("thread")||location.pathname.includes("forum.php")){if($(".t_f").length>0&&$(".favatar").find(".authi").length>0&&$(".avatar").find("img").length>0)return{avatar:[{name:"[[{$('.favatar').find('.authi')}]]"},{url:"[[{$('.avatar').find('img')}]]"}],include:"[[{$('.t_f')}]]"}}else if(/\/t\/[\w-]+\/\d+/.test(location.pathname)&&$("meta[name=generator]").attr("content").includes("discourse"))return{avatar:[{name:"[[{$('.topic-avatar').find('.a[data-user-card]')}]]"},{url:"[[{$('.topic-avatar').find('img')}]]"}],include:"[[{$('.cooked')}]]"};return-1}();-1!=i?(this.Newmultisite("read",i),this.state="temp"):this.Readability()}this.current.site.matching=t}},{key:"Addsites",value:function(e){var t=0;if(0==this.sites.global.length)this.sites.global=this.Formatsites(e),t=this.sites.global.length;else{var r=function(e,t){var r=new Map(t),n=[].concat(k(r.keys())),o=0;return e.map(function(e){n.includes(e[0])?n.includes(e[0]):o++}),{count:o,newsites:e}}(this.Formatsites(e),this.sites.global);t=r.count,this.sites.global=r.newsites}return t}},{key:"Addlocalsites",value:function(e){return this.sites.local=[].concat(k(e)),this.sites.local}},{key:"Addallsites",value:function(e){return this.sites={global:[].concat(k(e.global)),person:[].concat(k(e.person)),custom:[].concat(k(e.custom)),local:[].concat(k(e.local))},this.sites}},{key:"Newsite",value:function(e,t,r){var n={mode:e,url:window.location.href,site:{name:"tempread::"+window.location.host,title:"<title>",desc:"[[{$('meta[name=Description]').attr('content')||$('meta[name=description]').attr('content')}]]",include:"",exclude:[]}};t&&(n.site.html=t),this.current.mode=n.mode,this.current.url=n.url,this.current.site=this.Safesite(y({},n.site),"local",n.url),r&&(this.current.site.excerpt=r)}},{key:"Newmultisite",value:function(e,t){var r={mode:e,url:window.location.href,site:{name:"tempread::"+window.location.host,title:"<title>",desc:"",include:t.include,exclude:[],avatar:t.avatar}};this.current.mode=r.mode,this.current.url=r.url,this.current.site=this.Safesite(y({},r.site),"local",r.url)}},{key:"Updatesite",value:function(e,t,r){var n=this.sites[e].findIndex(function(e){return e[0]==t});-1==n&&(n=this.sites[e].length),this.sites[e].splice(n,1,r)}},{key:"Deletesite",value:function(e,t,r){var n=this.sites[e].findIndex(function(e){return e[0]==t});-1!=n&&this.sites[e].splice(n,1),r(n)}},{key:"Safesite",value:function(e,t,r){return e.url=r,e.target=t,""==e.name&&(e.name="tempread::"),(!e.avatar||0==e.avatar.length)&&(e.avatar=[{name:""},{url:""}]),(!e.paging||0==e.paging.length)&&(e.paging=[{prev:""},{next:""}]),e}},{key:"Cleansite",value:function(e){return delete e.url,delete e.html,delete e.target,delete e.matching,e.avatar&&e.avatar.length>0&&""==e.avatar[0].name&&delete e.avatar,e.paging&&e.paging.length>0&&""==e.paging[0].prev&&delete e.paging,e}},{key:"Formatsites",value:function(e){var t=new Map,r=!0,n=!1,o=void 0;try{for(var i,a=e.sites[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;if(0==d(s)){var l=s.url;delete s.url,t.set(l,s)}}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return[].concat(k(t))}},{key:"Clearsites",value:function(e){e?this.sites[e]=[]:this.sites={global:[],custom:[],local:[]}}},{key:"Origins",value:function(e){var t=e.origins.map(function(e){return e.url});return(t=new Set(this.origins.concat(t))).forEach(function(e){""!=e.trim()&&e.trim().startsWith("http")&&e.trim().endsWith(".json")||t.delete(e)}),this.origins=[].concat(k(t)),this.origins}},{key:"Addorigins",value:function(e){return this.sites.custom=[].concat(k(e)),this.sites.custom}},{key:"Clearorigins",value:function(){var e=this.sites.custom.length;return this.sites.custom=[],e}}]),r}();return function(t){function r(e){g(this,r);var t=w(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.version="0.0.4 build 0616",t.org_url=location.href,t.html={},t.plugin={},t.pure=!1,t.cleanup=!1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,M),b(r,[{key:"Exist",value:function(){return this.org_url==location.href}},{key:"AddPlugin",value:function(e){this.plugin={minimatch:e.minimatch,pangu:e.pangu,beautify:e.beautify,stylesheet:e.style,rdability:e.rdability,markdown:e.markdown},v(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"SetMinimatch",this).call(this,this.plugin.minimatch),v(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"SetRdability",this).call(this,this.plugin.rdability),v(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"SetMarkdown",this).call(this,this.plugin.markdown)}},{key:"ReadMode",value:function(){var t,r,o,i,a;this.html=(t=this.current.site,r=e(t),o=n(""==t.title?"<title>":t.title),i=n(t.desc),a=n(t.include),r.title=""==t.title||"<title>"==t.title?$("head title").text():h(o),r.desc=function(e){if(void 0==e)return e;var t=e.length,r=e.indexOf("。")+1;return t>100&&(e=r>0?e.substr(0,r):e.substr(0,101)+"......"),e}(t.excerpt?t.excerpt:h(i)),r.include=""==t.include&&""!=t.html?t.html:h(a,"html"),r.avatar&&r.avatar.length>0&&""==r.avatar[0].name&&delete r.avatar,r.paging&&r.paging.length>0&&""==r.paging[0].prev&&delete r.paging,r.avatar&&r.avatar.forEach(function(e){var t=Object.keys(e).join(),r=e[t];e[t]=h(n(r),"html")}),r.paging&&r.paging.forEach(function(e){var t=Object.keys(e).join(),r=e[t];e[t]=h(n(r))}),r)}},{key:"TempMode",value:function(e,t){this.state="temp",this.dom=t,this.Newsite(e,t.outerHTML)}},{key:"GetDom",value:function(e,t){return h(n(e),t)}},{key:"Include",value:function(){var e=this.current.site.include,t=[],r=n(e);try{if(o(r)){var i=a(e),s=x(i,2),l=s[0],c=s[1];0==c?(e=e.replace(/\[\[{\$\(|}\]\]|\).html\(\)/g,""),t=$(a("[[["+e+"]]]")[0])):3==c&&(t=l)}else r&&(t=$("body").find(r))}catch(e){}return t}},{key:"Exclude",value:function(e){return function(e,t){var r=[],i="",s=!0,l=!1,c=void 0;try{for(var p,u=t[Symbol.iterator]();!(s=(p=u.next()).done);s=!0){var d=p.value;if(o(d)){var f=a(d),h=x(f,2),m=h[0],g=h[1];if(1==g)i=m;else if(2==g){var b=e.html().match(new RegExp(m,"g"));if(b&&b.length>0){var y=b.join("");i="*["+y+"]"}else i=void 0}else 3==g?m.remove():4==g&&m.remove()}else i=n(d);i&&r.push(i)}}catch(e){l=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}return r.join(",")}(e,this.current.site.exclude)}},{key:"Beautify",value:function(e){0!=e.children().length&&this.plugin.beautify&&(this.cleanup&&this.plugin.beautify.cleanHTML(e,this.pure,this.isMathJax()),this.plugin.beautify.specbeautify(this.current.site.name,e),this.plugin.beautify.removeSpareTag(this.current.site.name,e),this.plugin.beautify.htmlbeautify(e),this.plugin.beautify.commbeautify(this.current.site.name,e))}},{key:"Format",value:function(e){this.plugin.pangu&&this.plugin.pangu.spacingElementByClassName(e)}},{key:"Utils",value:function(){return{dom2Xpath:s,xPath2Dom:l}}}]),r}()})},79:function(e,t,r){t=e.exports=r(5)(),t.push([e.id,'.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-focus-root{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,92%,.9);z-index:2147483645;opacity:0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms}.simpread-focus-highlight{position:relative;box-shadow:0 0 0 20px #fff;background-color:#fff;overflow:visible;z-index:2147483646}.sr-controlbar-bg sr-rd-crlbar,.sr-controlbar-bg sr-rd-crlbar fab{z-index:2147483647}.simpread-read-root{display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;margin:20px 20%;min-width:400px;min-height:400px;text-align:center}read-process{position:fixed;top:0;left:0;height:3px;width:100%;background-color:#64b5f6;-webkit-transition:width 2s;transition:width 2s;z-index:20000}sr-rd-content-error{display:block;position:relative;margin:0;margin-bottom:30px;padding:25px;background-color:rgba(0,0,0,.05)}sr-rd-footer{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;font-size:14px}sr-rd-footer,sr-rd-footer-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}sr-rd-footer-group{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:33px;height:33px;opacity:.8;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:baseline;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}sr-rd-crlbar.controlbar{position:fixed;right:0;bottom:0;width:100px;height:100%;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}sr-rd-crlbar.controlbar:hover{opacity:1}@media (max-height:620px){fab{zoom:.8}}@media (max-height:783px){dialog-gp dialog-content{max-height:580px}dialog-gp dialog-footer{border-top:1px solid #e0e0e0}}.simpread-highlight-selector{cursor:pointer!important}.simpread-highlight-controlbar,.simpread-highlight-selector{background-color:#fafafa!important;outline:3px dashed #1976d2!important;opacity:.8!important;-webkit-transition:opacity .5s ease!important;transition:opacity .5s ease!important}.simpread-highlight-controlbar{position:relative!important}simpread-highlight{position:fixed;top:0;left:0;right:0;padding:15px;height:50px;background-color:rgba(50,50,50,.9);box-shadow:0 2px 5px rgba(0,0,0,.26);z-index:2147483640}simpread-highlight,sr-highlight-ctl{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-highlight-ctl{margin:0 5px;width:50px;height:20px;color:#fff;background-color:#1976d2;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}toc-bg{position:fixed;left:0;top:0;width:50px;height:200px;font-size:medium}toc-bg:hover{z-index:3}.toc-bg-hidden{opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.toc-bg-hidden:hover{opacity:1;z-index:3}.toc-bg-hidden:hover toc{width:180px}toc *{all:unset}toc{position:fixed;left:0;top:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:10px;width:0;max-width:200px;max-height:500px;overflow-x:hidden;overflow-y:hidden;cursor:pointer;border:1px solid hsla(0,0%,62%,.22);-webkit-transition:width .5s;transition:width .5s}toc:hover{overflow-y:auto}toc::-webkit-scrollbar{width:3px}toc::-webkit-scrollbar-thumb{border-radius:10px;background-color:hsla(36,2%,54%,.5)}toc outline{position:relative;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding:2px 0;min-height:21px;line-height:21px;text-align:left}toc outline a,toc outline a:active,toc outline a:focus,toc outline a:visited{display:block;width:100%;color:inherit;font-size:11px;text-decoration:none!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}toc outline a:hover{font-weight:700!important}toc outline a.toc-outline-theme-dark,toc outline a.toc-outline-theme-night{color:#fff!important}.toc-level-h1{padding-left:5px}.toc-level-h2{padding-left:15px}.toc-level-h3{padding-left:25px}.toc-level-h4{padding-left:35px}.toc-outline-active{border-left:2px solid #f44336}toc outline active{position:absolute;left:0;top:0;bottom:0;padding:0 0 0 3px;border-left:2px solid #e8e8e8}sr-kbd{background:-webkit-gradient(linear,0 0,0 100%,from(#fff785),to(#ffc542));border:1px solid #e3be23;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;position:absolute;left:0;padding:1px 3px 0;font-size:11px!important;font-weight:700;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);overflow:hidden;border-radius:3px}.sr-kbd-a{position:relative}kbd-mapping{position:fixed;left:5px;bottom:5px;-ms-flex-direction:column;flex-direction:column;-ms-flex-flow:row;flex-flow:row;width:500px;height:590px;background-color:#fff;border:1px solid hsla(0,0%,62%,.22);box-shadow:0 2px 5px rgba(0,0,0,.26);border-radius:3px}kbd-mapping,kbd-maps{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal}kbd-maps{-ms-flex-flow:column wrap;flex-flow:column wrap;margin-top:40px}kbd-mapping kbd-map-title{position:absolute;margin:5px 0;width:100%;font-size:14px;font-weight:700}kbd-maps-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}kbd-maps-title{margin:5px 0;padding-left:53px;font-size:12px;font-weight:700}kbd-map kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}kbd-map kbd-name{display:inline-block;text-align:right;width:50px}kbd-map kbd-desc{padding-left:3px}sharecard-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.4);z-index:2147483647}sharecard{max-width:450px;background-color:#64b5f6}sharecard,sharecard-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-head{margin:25px;color:#fff;border-radius:10px;box-shadow:0 2px 6px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.15)}sharecard-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-card,sharecard-top{display:-webkit-box;display:-ms-flexbox;display:flex}sharecard-top{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:65px;background-color:#fff;color:#878787;font-size:25px;font-weight:500;border-top-left-radius:10px;border-top-right-radius:10px}sharecard-top span.logos{display:block;width:48px;height:48px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABU1BMVEUAAAAnNJMnNZI3Q5onNJInNJMnNJInNJMnNJI8SJ0tOZY/S55EUKAoNJI6RpwoNJNIU6InNJInNJImNJI7SJwmNJJ2fLUiMJFKVaNCTJ9faK1HUaJOWKVSXaUnNJNYY6pye7cmM5JXYKhwebMjMI8mL4719fW9vb0oNZP/UlLz8/QqN5TAwMAnNJPv7+/Pz8/q6+/p6enNzc3Kysry8vMsOJXc3env7/LU1uXo29vR0dHOzs7ExMTwjo73bW37XV3Aj1TCYELl5u3n5+fW2Obn6O7f4OrZ2+g0QJkxPpgvO5bh4uvS1OTP0ePCwsJQW6ZLVqTs7fHd3d3V1dXqv79VX6lET6A1TIxXUIBSgHxWQnpelHf+WVnopkXqbC7j5Ozi4uLDw8NGUaFATJ9SgH3r6+vGyd7BxNva2trX19ejqM2gpczHx8dze7Zha67Z2dlTgH1aXQeSAAAAJnRSTlMA6ff+497Y8NL+/fv49P379sqab/BeOiX06tzVy8m/tKqpalA7G6oKj0EAAAJlSURBVEjHndNXWxpBFIDhcS2ICRLAkt4Dx4WhLk0E6R0MYoIISrWX5P9f5cwSIRC2+T1czMV5n2FnZwn2eWONUqCAv3H2Uf5Ra1hx4+0WEXtDQW0fCPYJ1EffEfIV4CSROAE4jsePoTFsNmTJF/IeIHF2lgCIn57GodlqDWXBK7IwBYatVlMWFAildPKX7I3m74Z9fsCiQChoimoFQAz04Ad2gH1n9fv9n9hgMNDr9euLWD6fLxQKxaLfb7dTSlahbFVdEPwIQtrAihZQgyKCtCagbQe3xh0QFMgy5MR11+ewYY5/qlZ7vT2xu93ULKjbFLpiUxnIIwjgKmVTLDUFXMrAi2NJWCRLIthTBo4xyOLKpwyqU6CuDCI41hFBCVdOhyLw4FgJ1skCAiyl9BSHbCorgo6VJXTru5hrVCQS8Yr5xLzX59YJSFpVFwD9U0BGC3hGdFpATgRupTGe9R9I1b1ePBvXKDyvq/O/44LT4/E4BUbSCAwj8Evq6HlnOBprx6JhJz8Gktc7xeaP9ndY+0coQvCccFBD4JW60UIY50ciLOAODAQRVOeCHm4Q3Xks6uRDY+CQ+AR4T2wMYh6+jMCIQOp78CFoj0H7EQgIuhI3dGaHCrwgADwCPjJvA372GRigCJg49FUdk3D87pq3zp4SA5zc1Zh9DxfwkpjgUg5Mv+lbeE3McC8Lpu7SA3wk2xzcqL2tN5DfIsQC8HB7UamUy6FQOpTO5QKBQDZbKnWSyUzGjdWCwaDA8+7Le4BNgm3qQGWchYh9s5hNq6wVbBlbwhZYOp3OYOA4zmgEypnM2zj8ByIdedKrH8vDAAAAAElFTkSuQmCC");zoom:.8}sharecard-content{padding:15px;max-height:500px;font-size:20px;text-align:left;background-color:#2196f3;overflow-x:hidden;overflow-y:auto}sharecard-via{padding:10px;font-size:10px;background-color:#2196f3}sharecard-footer{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:100px;background-color:#fff;color:#878787;font-size:15px;font-weight:500;border-bottom-left-radius:10px;border-bottom-right-radius:10px}sharecard-footer,sharecard-footer div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sharecard-footer span.qrcode{display:block;width:100px;height:100px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAA7VBMVEUAAAD///8ZGRnw8PBWVlb4+PgeHh719fVEREQlJSUODg6Ojo7Ly8v9/f1NTU2VlZUFBQV6enrCwsLy8vLh4eE0NDQLCwu8vLyXl5dxcXHa2trAwMCFhYVDQ0OysrKampo7OzssLCwICAioqKjJyckhISHu7u4/Pz9TU1NQUFBLS0tAQED6+vrS0tKRkZFISEgvLy+goKB+fn5vb29nZ2fm5uYbGxvk5OTX19d2dnZaWlre3t5hYWEyMjK5ubkoKCgVFRXQ0NDMzMzFxcW0tLSsrKykpKSMjIzq6urU1NSAgICvr6+cnJyHh4dsbGyfc25QAAAFkElEQVRIx4WXB3faMBCA74wHxgMMGAOh1MyyVyBAmtVmd/3/n1OdDtWstt/Li5JD35MtnU4CMnCIlkLEOpSKuMPhuI4FE444L9+dyv3zciad/rAjfU/yOPpGcjWS1NKSGsk29WTSD1IeYsIPkvsAJF+C5BIZkieYMNjJnsF4+JHk61wOSlVDyOIPqKBgZIxYTrqy/AmNtC1ps7yqlgE6dgYa1WqD5aV9SbKDbe6ZNnCq5A5ILlhGjEASIoawJdmHHo98AZLOnmxzKM9yK9Aht63FoAWBBmEgsEHnkfMgsZU8PJbpbXJd3MIep/Lg/MjbRqMRRuNtQ4Tthga5RiNzfmSWD97ZExQ64HhtgLb3CmbBGyj54vixjyeMsKjnV4AvOAHTwsHphKnH9toXki7Li3jLsgswizskv+c3PHKXe7ZHu5E/YMKcM2yqZIJkAclZTPClbJezivI1yTr4f+TeMib5qXxHsr7XtUFJDIc8pLAHA7Su4JXkd8ySnKZddQXH2NohswIutRu0Qu0jyS46JPugU+gISB1R8NBKWegVUsahTKEjAP9Bm5bKAc3DPlzjKaDvscE7PeEJu63WUg9a82tdA1O/ESupL9Cr6C1cXetjIe9zgQ4kvKLgHi6xC5LcGq9hhmiK0AYgUvLQtzm3n/x0jnum/Vo9j1jxg/pL3/f9W8isMOsv6/Ubf47rvl+u17nnZ1xQ+4iIXa6IpRVeimEEE3pnxO8kIz4CbFDyidVSpooBCCLLsj5noFlqUg2rwK0l+Anmm+VhCzKfrRHtqjGOLANxUKIUiYvFEcuaaZpXANniD5ZzpiBDTSRkuDJfWM6awxGuikUArp7fIOE7RlB6OygGTyhfsMyrtwDNIAkcp1YRhKC9Oh2IHUFQ6UPupnLL3icODaD5zVlUto7zhm1n7kmZ5kDSQBxykfZhD66eaQBoWriEGPcA182C4Crst90Z9NwvHgahDTALw/Ae4D500Pjq3oj/4sjtwcwVrCkkgB01HB8cdM0iIlWSr6IpNqFO+1mDHQFWORtO5EIi08b4jxy6giBsgKDnRnEYYdd9nIYvaLmuhS/h9DF5bEFr/7HTKAjUqWY1oUUBKgYEZdgIP6gJE2xQIWVvLhZBcAWx843kz87PDDi4cgR92s8/1FLpAGNeKiUbGtRQEIPkGb9TM1EF8MpCVEni7pIkkUdDs1ZcI/ZUer6YZg4WxTtqMmYsZJWebbOzEekZV4sCKaNhBaXQQ0NtjL71ZooNE1vWLfyyyFUbw7MsD0fWOFMSqAnbwj1Kuk0Aqp4aJ91MZhhvyS7+oQoMy5v63Jfoz/UYfPSiep2KQb5e4/gt1Ycdc7Se6jNyVbpuQNI08FrICQ6ccKnSXddrKCnqkqWFupJFAewKudSTBVAyBEjrLSXjCYnc5rrdQVl6VaiKqOTToi/kaSrlcW5fpGpgrlJTLvoGVxKDOg7PHzc6NLXOmuUHTZQhTWvS4T7T5ixPqGPz/EHXp/azkMeQoGOqBBOSq1gD4vwRe1culz8W8HlZKQt6Sjbm5XeS9eWizJw73HcsOW8mSpa0eT8zfK1w85LdtWKTf5dWfCPzMg5J+MBdsvvy6Q2QD/d91sfzouRz9zAdBp6HCcUzskccyBdKzjTC9ZE8HT8+JHLxtiE4d33Ud0uleOObvpXZk4E4/9h2sKD9t6oxgaCFxs9AHiI3wYJCndMbIMs9lLi7vEHFLxAUURyciOnTyzrLH6qSJwo+8CWuQIFL2wSoVyvQea/qtk2yvPtb4mekZMhJQkPwyvIzBbJGJD+jX3eGcfIFhWVmxsVAG5FMgSzm9y4wKL8aJdzvyctoTqEgep6K5lckWGM3uuuA5DadFvIhiTzBL1xzVtT0UDEDxd9ldeutcJLoyvUaoPgNdiqckZLamd0AAAAASUVORK5CYII=")}sharecard-control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 19px;height:80px;background-color:#fff}',""])},83:function(e,t,r){var n=r(79);"string"==typeof n&&(n=[[e.id,n,""]]),r(6)(n,{}),n.locals&&(e.exports=n.locals)},95:function(e,t,r){t=e.exports=r(5)(),t.push([e.id,"sr-opt-focus,sr-opt-read{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}sr-opt-focus,sr-opt-gp,sr-opt-read{display:-webkit-flex;-webkit-box-direction:normal;width:100%}sr-opt-gp{position:relative;-webkit-box-orient:horizontal;-ms-flex-flow:row nowrap;flex-flow:row;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;margin-bottom:25px;font-size:15px}sr-opt-gp sr-opt-label{display:block;position:absolute;margin:-8px 0 0;font-size:14px;font-weight:700;color:rgba(0,137,123,.8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transform:scale(.75) translateY(-8px);transform:scale(.75) translateY(-8px);-webkit-transform-origin:left top 0;transform-origin:left top 0}sr-opt-themes{display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;margin:8px 0 17px;padding:0}sr-opt-theme{width:40px;height:20px;cursor:pointer;list-style:none;border-radius:3px;border:1px solid #212121;box-sizing:border-box;opacity:1;-webkit-transition:all opacity .5s cubic-bezier(.23,1,.32,1) 1s 0ms;transition:all opacity .5s cubic-bezier(.23,1,.32,1) 1s 0ms}sr-opt-theme:hover{opacity:.2;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)}sr-opt-theme:not(:first-child){margin-left:5px}sr-opt-theme[sr-type=active]{box-shadow:0 3px 3px 0 rgba(0,0,0,.14),0 2px 20px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.7)}",""])},97:function(e,t){e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,o=Math.ceil(1.6*n*r/t.length),i="";;)for(var a=e(o),s=0;s<o;s++){var l=a[s]&n;if(t[l]&&(i+=t[l],i.length===r))return i}}},98:function(e,t,r){var n=r(99),o=r(97);e.exports=function(e,t){return o(n,e,t)}},99:function(e,t){var r=self.crypto||self.msCrypto;e.exports=function(e){return r.getRandomValues(new Uint8Array(e))}},104:function(e,t,r){var n=r(95);"string"==typeof n&&(n=[[e.id,n,""]]),r(6)(n,{}),n.locals&&(e.exports=n.locals)},105:function(e,t,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e){_=e}function s(e){switch(e){case".":u();break;case",":m()}}function l(e){var t=$.Callbacks();t.add(e),v.default.bind("esc",function(e,r){b()?g():h()?f():"keyboard"==C?v.default.trigger(O):t.fire(r)})}function c(e){var t=$.Callbacks();t.add(e);var r=new Map;Object.values(E.keyboard).forEach(function(e){Object.values(e).forEach(function(e){var t=e.kbd[0]+" "+e.kbd[1],n=function(n,o){var i=e.type.replace("_","");r.delete(t),r.set(t+" "+(o+1),e.type+E.shortcuts[i].name[o])};switch(r.set(t,e.type),e.type){case"fontfamily_":Array(5).fill(1).forEach(n);break;case"fontsize_":case"layout_":Array(3).fill(1).forEach(n);break;case"theme_next":r.delete(t),r.set(t+" right",e.type);break;case"theme_prev":r.delete(t),r.set(t+" left",e.type)}})}),v.default.bind([].concat(i(r.keys())),function(e,n){"keyboard"==C&&t.fire(r.get(n))})}function p(e,t){v.default.bind(e,t)}function u(){return h()?void f():(_.find("a").map(function(e,t){var r=R(e+"");$(t).addClass("sr-kbd-a").append("<sr-kbd id="+r+">"+r+"</sr-kbd>"),S.push(r.toLowerCase())}),void(S.length>0&&$("html").on("keypress",d)))}function d(t){var r=t.key.toUpperCase(),n=S.join("").match(new RegExp(r,"ig"));if("."!=r)if(n)if(1==n.length){var o=_.find("sr-kbd[id="+r+"]");if(o&&o.is("sr-kbd")){var i=o.parent()[0].href;i&&i.startsWith("http")&&w.browser.runtime.sendMessage(k.Add(k.MESSAGE_ACTION.new_tab,{url:i})),i&&i.startsWith("http")&&f()}}else!function(){(new e).Render("已缩小查询范围。"),S=[];var t=0;_.find("sr-kbd").map(function(e,n){if(n.id.includes(r)){var o=R(t+"");n.outerHTML="<sr-kbd id="+o+">"+o+"</sr-kbd>",S.push(o.toLowerCase()),t++}else $(n).remove()})}();else(new e).Render("当前已进入链接模式，如需其它操作，请使用 ESC 退出此模式。")}function f(){$("sr-kbd").remove(),_.find("a").removeClass("sr-kbd-a"),$("html").off("keypress",d),S=[]}function h(){return!!(_&&_.find($("sr-kbd")).length>0)}function m(){var e="";Object.keys(E.keyboard).forEach(function(t){var r="";Object.keys(E.keyboard[t]).forEach(function(e,n){var o=E.keyboard[t][e];r+='<kbd-map><kbd-name><kbd id="'+o.type+'">'+o.kbd+"</kbd></kbd-name><kbd-desc>"+o.desc+"</kbd-desc></kbd-map>"}),e+="<kbd-maps-group><kbd-maps-title>"+t+"</kbd-maps-title>"+r+"</kbd-maps-group>"});var t="\n    <kbd-mapping>\n        <kbd-map-title>快捷键一览</kbd-map-title>\n        <kbd-maps>\n            <kbd-maps-group>\n                <kbd-maps-title>全局</kbd-maps-title>\n                <kbd-map><kbd-name><kbd>esc</kbd></kbd-name><kbd-desc>退出当前模式</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>←</kbd></kbd-name><kbd-desc>前一页</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>→</kbd></kbd-name><kbd-desc>后一页</kbd-desc></kbd-map>\n            </kbd-maps-group>\n            <kbd-maps-group>\n                <kbd-maps-title>阅读模式</kbd-maps-title>\n                <kbd-map><kbd-name><kbd>sr</kbd></kbd-name><kbd-desc>快捷键开启/关闭条件</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>,</kbd></kbd-name><kbd-desc>打开/关闭快捷键一览</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>.</kbd></kbd-name><kbd-desc>打开当前页面的任意链接</kbd-desc></kbd-map>\n            </kbd-maps-group>\n            "+e+"\n        </kbd-maps>\n    </kbd-mapping>\n    ";b()?g():_.parent().append("<kbd-bg>"+t+"</kbd-bg>")}function g(){_.parent().find("kbd-bg").remove()}function b(){return $("kbd-bg").length>0}Object.defineProperty(t,"__esModule",{value:!0}),t.Bind=t.Listen=t.ListenESC=t.Render=void 0;var y=r(262),v=o(y),w=r(11),x=r(19),k=n(x),A=r(48),E=n(A),_=void 0,C="",O="s r",M=[".",","];M.map(function(e){return O+" "+e}),v.default.bind(O,function(){0!=$("html").find(".simpread-read-root").length&&(""==C?(C="keyboard",(new e).Render("已进入快捷键操作模式，退出请使用 sr，帮助请按,")):(C="",(new e).Render("已退出快捷键操作模式！")))}),v.default.bind(M,function(e,t){"keyboard"==C&&s(t)});var S=[],j=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],R=function(e){switch(!0){case e<26:return j[e];case e>=26&&e<=99:return j[e[0]]+j[e[1]];case e>99:return j[e[0]]+j[e[1]]+j[e[2]]}};t.Render=a,t.ListenESC=l,t.Listen=c,t.Bind=p}).call(t,r(10))},131:function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(58),p=r(23),u=n(p),d=r(134),f=n(d),h=r(137),m=n(h),g=r(133),b=n(g),y=r(132),v=n(y),w=function(t){function r(){var e,t,n,o;i(this,r);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=n=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(l))),n.state={err_title:"",err_desc:"",err_avatar_name:"",err_avatar_url:"",err_paging_prev:"",err_paging_next:""},o=t,a(n,o)}return s(r,t),l(r,[{key:"changeName",value:function(e,t){this.props.site.name=e,this.props.state.name=t}},{key:"changeURL",value:function(e,t){this.props.site.url=e,this.props.state.url=t}},{key:"changeTitle",value:function(e){var t=e.target.value.trim();""==t?(this.setState({err_title:"当前输入不能为空。"}),this.props.state.title=-2):(0,c.verifyHtml)(t)[0]!=-1?(this.setState({err_title:""}),this.props.site.title=t,this.props.state.title=0):(this.setState({err_title:"当前输入为非法。"}),this.props.state.title=-1)}},{key:"changeDesc",value:function(e){var t=e.target.value.trim();(0,c.verifyHtml)(t)[0]!=-1?(this.setState({err_desc:""}),this.props.site.desc=t,this.props.state.desc=0):(this.setState({err_desc:"当前输入为非法。"}),this.props.state.desc=-1);
}},{key:"changeInclude",value:function(e,t){this.props.site.include=e,this.props.state.include=t}},{key:"changeExclude",value:function(e,t){this.props.site.exclude=e,this.props.state.exclude=t}},{key:"changeAvatar",value:function(e,t,r){r=r.trim(),(0,c.verifyHtml)(r)[0]!=-1?(this.setState(o({},"err_avatar_"+t,"")),this.props.site.avatar[e][t]=r,this.props.state.avatar[t]=0):(this.setState(o({},"err_avatar_"+t,"当前输入为非法。")),this.props.state.avatar[t]=-1)}},{key:"changePaging",value:function(e,t,r){r=r.trim(),(0,c.verifyHtml)(r)[0]!=-1?(this.setState(o({},"err_paging_"+t,"")),this.props.site.paging[e][t]=r,this.props.state.paging[t]=0):(this.setState(o({},"err_paging_"+t,"当前输入为非法。")),this.props.state.paging[t]=-1)}},{key:"changeCSS",value:function(e){this.props.site.css=e.target.value.trim()}},{key:"render",value:function(){var t=this;return e.createElement("sr-opt-read",null,e.createElement("sr-opt-items",null,e.createElement("sr-opt-gp",null,e.createElement(f.default,{name:this.props.site.name,changeName:function(e,r){return t.changeName(e,r)}})),e.createElement("sr-opt-gp",null,e.createElement(m.default,{url:this.props.site.url,changeURL:function(e,r){return t.changeURL(e,r)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!1,floatingtext:"标题",placeholder:"必填，不可为空。",value:this.props.site.title,errortext:this.state.err_title,onChange:function(e){return t.changeTitle(e)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!1,placeholder:"默认为空。",floatingtext:"描述",value:this.props.site.desc,errortext:this.state.err_desc,onChange:function(e){return t.changeDesc(e)}})),e.createElement("sr-opt-gp",null,e.createElement(b.default,{mode:"read",include:this.props.site.include,changeInclude:function(e,r){return t.changeInclude(e,r)}})),e.createElement("sr-opt-gp",null,e.createElement(v.default,{exclude:this.props.site.exclude,changeExclude:function(e,r){return t.changeExclude(e,r)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!1,placeholder:"默认为空，只限论坛类页面使用。",floatingtext:"头像的名称",value:this.props.site.avatar[0].name,errortext:this.state.err_avatar_name,onChange:function(e){return t.changeAvatar(0,"name",e.target.value)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!1,placeholder:"默认为空，只限论坛类页面使用。",floatingtext:"头像的地址",value:this.props.site.avatar[1].url,errortext:this.state.err_avatar_url,onChange:function(e){return t.changeAvatar(1,"url",e.target.value)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!1,placeholder:"默认为空，只限论坛类页面使用。",floatingtext:"前一页",value:this.props.site.paging[0].prev,errortext:this.state.err_paging_prev,onChange:function(e){return t.changePaging(0,"prev",e.target.value)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!1,placeholder:"默认为空，只限论坛类页面使用。",floatingtext:"后一页",value:this.props.site.paging[1].next,errortext:this.state.err_paging_next,onChange:function(e){return t.changePaging(1,"next",e.target.value)}})),e.createElement("sr-opt-gp",null,e.createElement(u.default,{multi:!0,placeholder:"默认为空，输入的 CSS 只针对当前站点有效。",floatingtext:"自定义 CSS",value:this.props.site.css||"",onChange:function(e){return t.changeCSS(e)}}))))}}]),r}(e.Component);t.default=w}).call(t,r(2))},189:function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(){switch(!0){case"meta"==h.storage.pr.state:(new n).Render("当前为 <a href='http://ksria.com/simpread/docs/#/主动适配阅读模式' target='_blank'>主动适配阅读模式</a>，并不能使用设定功能。");break;case"txt"==h.storage.pr.state:(new n).Render("当前为 <a href='http://ksria.com/simpread/docs/#/TXT-阅读器' target='_blank'>TXT 阅读器模式</a>，并不能使用设定功能。");break;default:!S.Popup(R)&&S.Open(e.createElement(P,null),j)}}function p(){return S.Popup(R)}function u(){S.Close()}Object.defineProperty(t,"__esModule",{value:!0}),t.Exit=t.Exist=t.Render=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=r(8),m=r(21),g=i(m),b=r(11),y=r(19),v=i(y),w=r(131),x=o(w),k=r(16),A=o(k),E=r(37),_=i(E),C=r(49),O=i(C),M=r(194),S=i(M),j="simpread-option-root",R="."+j,T=void 0,$={name:0,url:0,title:0,desc:0,include:0,exclude:0,avatar:{name:0,url:0},paging:{prev:0,next:0}},P=function(t){function r(){return a(this,r),s(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return l(r,t),f(r,[{key:"close",value:function(){S.Close()}},{key:"action",value:function(e){var t=this;g.Verify(function(r,o){r?(new n).Render("配置文件已更新，刷新当前页面后才能生效。","刷新",function(){return window.location.reload()}):"save"==e?t.save():t.delete()})}},{key:"delete",value:function(){(new n).Render("是否删除当前适配站点？","删除",function(){T.name.startsWith("tempread::")?(new n).Render(2,"当前站点为自动识别，无误删除。"):h.storage.pr.Deletesite(h.storage.current.site.target,T.url,function(e){e==-1?(new n).Render(2,"此站已被删除，请勿重复操作。"):h.storage.Writesite(h.storage.pr.sites,function(){(new n).Render("删除成功，如需生效，请刷新本页。"),g.SendMessage("site",!0)})})})}},{key:"save",value:function(){["url","name","title","include"].findIndex(function(e){return""==T[e]})!=-1?(new n).Render(3,"【标识、域名、标题、高亮】不能为空。"):Object.values($).findIndex(function(e){return"number"==typeof e&&0!=e})!=-1||0!=$.avatar.name||0!=$.avatar.url||0!=$.paging.prev||0!=$.paging.next?(new n).Render(3,"请正确填写【标识、域名、标题、高亮】后再提交。"):""!=T.avatar[0].name&&""==T.avatar[1].url||""==T.avatar[0].name&&""!=T.avatar[1].url?(new n).Render(3,"【头像的名称与地址】必须同时设定。"):""!=T.paging[0].prev&&""==T.paging[1].next||""==T.paging[0].prev&&""!=T.paging[1].next?(new n).Render(3,"【前一页与后一页】必须同时设定。"):T.name.startsWith("tempread::")?(new n).Render(2,"标识不能包含 tempread:: 请删除。"):""==T.include.trim()?(new n).Render(2,"高亮区域不能为空。"):(h.storage.pr.Updatesite("local",h.storage.current.url,[T.url,h.storage.pr.Cleansite(T)]),h.storage.Writesite(h.storage.pr.sites,function(){(new n).Render(0,"更新成功，页面刷新后生效！"),g.SendMessage("site",!0)}))}},{key:"submit",value:function(){var e=d({},T);delete e.html,b.browser.runtime.sendMessage(v.Add(v.MESSAGE_ACTION.temp_site,{url:location.href,site:e,uid:h.storage.user.uid,type:"temp"}))}},{key:"componentDidMount",value:function(){O.Render({root:R}),_.Render(R)}},{key:"render",value:function(){var t=this;if(T=d({},h.storage.pr.current.site),"temp"==h.storage.pr.state&&h.storage.pr.dom){T.name=T.name.replace("tempread::","");var r=h.storage.pr.Utils().dom2Xpath(h.storage.pr.dom);""!=r?T.include="[[`"+r+"`]]":T.include=h.storage.pr.dom.outerHTML.replace(h.storage.pr.dom.innerHTML,"").replace(/<\/\S+>$/i,"")}return e.createElement(S.Dialog,null,e.createElement(S.Content,null,e.createElement(x.default,{site:T,state:$})),e.createElement(S.Footer,null,e.createElement(A.default,{text:"删 除",waves:"md-waves-effect",color:"#fff",backgroundColor:"#F44336",onClick:function(){return t.action("delete")}}),"temp"==h.storage.pr.state?e.createElement(A.default,{text:"提交临时阅读模式",waves:"md-waves-effect",color:"#fff",backgroundColor:"#4CAF50",width:"100%",onClick:function(){return t.submit()}}):e.createElement("div",{style:{width:"100%"}}),e.createElement(A.default,{text:"退 出",mode:"secondary",waves:"md-waves-effect",onClick:function(){return t.close()}}),e.createElement(A.default,{text:"保 存",waves:"md-waves-effect",onClick:function(){return t.action("save")}})))}}]),r}(e.Component);t.Render=c,t.Exist=p,t.Exit=u}).call(t,r(2),r(10))},190:function(e,t,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(t,r,n,o){if(t.indexOf("_")>0&&t.startsWith("share")){var i="";switch(t.split("_")[1]){case"facebook":i="https://www.facebook.com/dialog/feed?app_id=1528743474024441&link="+window.location.href;break;case"twitter":i="https://twitter.com/intent/tweet?text="+r+" （ 分享自 简悦 ）&url="+window.location.href;break;case"gplus":i="https://plus.google.com/share?url="+window.location.href;break;case"weibo":i="http://service.weibo.com/share/share.php?url="+window.location.href+"&title="+r+" （ 分享自 简悦-SimpRead ）";break;case"telegram":i="https://t.me/share/url?url="+window.location.href;break;case"card":(new e).Render("已启动分享卡标注功能，请在页面标注，生成分享卡。"),$("sr-rd-crlbar").find("panel-bg").length>0&&$("sr-rd-crlbar").find("panel-bg")[0].click(),h.Annotate().done(function(e){""!=e&&g.Render("focus"==c.storage.current.mode?"html":"sr-read",r,e)})}"card"!=t.split("_")[1]&&p.browser.runtime.sendMessage(d.Add(d.MESSAGE_ACTION.new_tab,{url:i}))}else["save","markdown","png","kindle","pdf","epub","temp","html"].includes(t)?(c.storage.Statistics("service",t),function(){switch(t){case"save":var i=window.location.href.replace(/(\?|&)simpread_mode=read/,"");c.storage.UnRead("add",{url:i,title:r,desc:n},function(t){t&&(new e).Render(0,"成功加入未读列表。"),!t&&(new e).Render(0,"已加入未读列表，请勿重新加入。")});break;case"markdown":var s="simpread-"+r+".md";""!=c.storage.pr.current.site.avatar[0].name&&(o=a.MULTI2ENML(o)),l.MDWrapper(a.ClearMD(o),s,new e);break;case"png":try{!function(){(new e).Render("下载已开始，请稍等...");var t="read"==c.storage.current.mode?$(".simpread-read-root"):$(".simpread-focus-highlight");$("sr-rd-crlbar").css({opacity:0}),setTimeout(function(){l.PNG(t[0],"simpread-"+r+".png",function(t){$("sr-rd-crlbar").removeAttr("style"),!t&&(new e).Render(2,"转换 PNG 格式失败，这是一个实验性功能，不一定能导出成功。")})},1e3)}()}catch(t){(new e).Render(1,"转换 PNG 格式失败，请注意，这是一个实验性功能，不一定能导出成功。")}break;case"epub":(new e).Render('当前使用了第三方 <a href="http://ksria.com/simpread/docs/#/发送到-Epub" target="_blank">epub.press</a> 服务，开始转码生成 epub 请稍等...'),l.Epub(o,window.location.href,r,n,function(t){t&&(new e).Render(0,"转换成功，马上开始下载，请稍等。"),!t&&(new e).Render(2,'转换失败，这是一个实验性功能，不一定能导出成功，详细请看 <a href="http://ksria.com/simpread/docs/#/发送到-Epub" target="_blank">epub.press</a>')});break;case"html":case"temp":case"kindle":var u=(new e).Render({state:"loading",content:"开始转码阅读模式并上传到服务器，请稍后。"}),f={theme:c.storage.read.theme,fontsize:c.storage.read.fontsize,fontfamily:c.storage.read.fontfamily,layout:c.storage.read.layout,custom:c.storage.read.custom};l.kindle.Read(window.location.href,r,n,o,f,function(n,o){if(u.complete(),o)(new e).Render(2,"保存失败，请稍候再试！");else switch(t){case"kindle":(new e).Render("保存成功，3 秒钟后将跳转到发送页面。"),setTimeout(function(){l.kindle.Send()},3e3);break;case"temp":(new e).Render("保存成功，3 秒钟后将跳转到临时页面。"),setTimeout(function(){l.kindle.Temp()},3e3);break;case"html":(new e).Render("保存成功，开始下载..."),p.browser.runtime.sendMessage(d.Add(d.MESSAGE_ACTION.CORB,{settings:{url:l.kindle.host+"/"+l.kindle.id+".html",type:"GET"}}),function(t){t&&""!=t.done?(t=t.done.replace(/<link rel=\"stylesheet\" href=\"\.\/css\//gi,'<link rel="stylesheet" href="http://sr.ksria.cn/puread/'),l.Download("data:text/plain;charset=utf-8,"+encodeURIComponent(t),"simpread-"+r+".html")):(new e).Render(2,"导出出现问题，请稍后再试。")})}});break;case"pdf":"read"==c.storage.current.mode?($("sr-rd-crlbar").css({opacity:0}),setTimeout(function(){l.PDF(),$("sr-rd-crlbar").removeAttr("style")},500)):(new e).Render(2,"当前模式不支持导出到 PDF，请使用阅读模式。")}}()):["dropbox","pocket","instapaper","linnk","yinxiang","evernote","onenote","gdrive","jianguo","yuque"].includes(t)?!function(){var i=l.dropbox,s=l.pocket,u=l.instapaper,f=l.linnk,h=l.evernote,m=l.onenote,g=l.gdrive,b=l.jianguo,y=l.yuque,v="yinxiang"==t?"evernote":t;c.storage.Statistics("service",t);var w=function(t){!function(){switch(t){case"dropbox":""!=c.storage.pr.current.site.avatar[0].name&&(o=a.MULTI2ENML(o)),l.MDWrapper(a.ClearMD(o),void 0,new e).done(function(n){i.Write(r+".md",n,function(r,n,o){return l.svcCbWrapper(n,o,i.name,t,new e)},"md/")});break;case"pocket":s.Add(window.location.href,r,function(r,n){return l.svcCbWrapper(r,n,s.name,t,new e)});break;case"instapaper":u.Add(window.location.href,r,n,function(r,n){return l.svcCbWrapper(r,n,u.name,t,new e)});break;case"linnk":var v=(new e).Render({content:"开始保存到 Linnk，请稍等...",state:"loading"});f.GetSafeGroup(f.group_name,function(n,o){v.complete(),o?(new e).Render(2,f.name+" 保存失败，请稍后重新再试。"):(f.group_id=n.data.groupId,f.Add(window.location.href,r,function(r,n){return l.svcCbWrapper(r,n,f.name,t,new e)}))});break;case"evernote":case"yinxiang":h.env=t,h.sandbox=!1,""!=c.storage.pr.current.site.avatar[0].name&&(o=a.MULTI2ENML(o)),h.Add(r,a.HTML2ENML(o,window.location.href),function(n,i){l.svcCbWrapper(n,i,h.name,t,new e),"error"==i&&((new e).Render("保存失败，正在尝试优化结构再次保存，请稍等..."),l.MDWrapper(a.ClearMD(o,!1),void 0,new e).done(function(n){var o=a.MD2ENML(n),i=a.ClearHTML(l.MD2HTML(n));h.Add(r,i,function(n,i){l.svcCbWrapper(n,i,h.name,t,new e),"error"==i&&(new e).Render({content:"导出失败，是否以 Markdown 格式保存？",action:"是的",cancel:"取消",callback:function(n){"cancel"!=n&&((new e).Render({content:"转换为 Markdown 并保存中，请稍等...",delay:2e3}),h.Add(r,a.HTML2ENML(o,window.location.href),function(r,n){l.svcCbWrapper(r,n,h.name,t,new e),"error"==n&&(new e).Render({content:"转换后保存失败，是否提交当前站点？",action:"是的",cancel:"取消",callback:function(e){"cancel"!=e&&p.browser.runtime.sendMessage(d.Add(d.MESSAGE_ACTION.save_site,{url:location.href,site:{},uid:c.storage.user.uid,type:"evernote"}))}})}))}})})}))});break;case"onenote":m.Add(m.Wrapper(window.location.href,r,o),function(r,n){return l.svcCbWrapper(r,n,m.name,t,new e)});break;case"gdrive":""!=c.storage.pr.current.site.avatar[0].name&&(o=a.MULTI2ENML(o)),l.MDWrapper(a.ClearMD(o),void 0,new e).done(function(n){g.Add("file",function(r,n){return l.svcCbWrapper(r,n,g.name,t,new e)},g.CreateFile(r+".md",n))});break;case"jianguo":l.MDWrapper(a.ClearMD(o),void 0,new e).done(function(n){r=r.replace(/[|@!#$%^&*()<>\/,.+=\\]/gi,"-"),b.Add(c.storage.secret.jianguo.username,c.storage.secret.jianguo.password,b.root+"/"+b.folder+"/"+r+".md",n,function(r){var n=void 0;r&&201!=r.status&&204!=r.status&&(n="导出到坚果云失败，请稍后再试。"),l.svcCbWrapper(r,n,b.name,t,new e)})});break;case"yuque":l.MDWrapper(a.ClearMD(o),void 0,new e).done(function(n){y.Add(r,n,function(r,n){return l.svcCbWrapper(r,n,y.name,t,new e)})})}}()};l.VerifySvcWrapper(c.storage,l[v],t,l.Name(t),new e).done(function(e){return w(e)})}():t.startsWith("dyslexia")?t.endsWith("speak")?p.browser.runtime.sendMessage(d.Add(d.MESSAGE_ACTION.speak,{content:"标题 "+r+" 正文 "+o})):p.browser.runtime.sendMessage(d.Add(d.MESSAGE_ACTION.speak_stop)):t.startsWith("fullscreen")?document.documentElement.requestFullscreen():t.startsWith("webdav_")?!function(){var n=t.replace("webdav_","");c.storage.Safe(function(){c.storage.secret.webdav.forEach(function(i){i=JSON.parse(i),i.name==n&&l.MDWrapper(a.ClearMD(o),void 0,new e).done(function(n){r=r.replace(/[|@!#$%^&*()<>\/,.+=\\]/gi,"-"),(new e).Render("开始保存到 "+i.name+"，请稍等..."),l.webdav.Add(i.url,i.user,i.password,r+".md",n,function(r){var n=void 0;r&&201!=r.status&&204!=r.status&&(n="导出到 "+i.name+" 失败，请稍后再试。"),l.svcCbWrapper(r,n,i.name,t,new e)})})})})}():(new e).Render(2,"当前模式下，不支持此功能。")}Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var i=r(58),a=n(i),s=r(64),l=n(s),c=r(8),p=r(11),u=r(19),d=n(u),f=r(43),h=n(f),m=r(277),g=n(m);t.Action=o}).call(t,r(10))},195:function(e,t,r){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){var e="rgba(244, 67, 54, 1)",t="rgba(245, 82, 70, .8)",r="rgba(243, 52, 38, .9)",n={root:{display:"-webkit-box",WebkitBoxAlign:"center",WebkitBoxOrient:"vertical",WebkitBoxDirection:"reverse",position:"fixed",bottom:"45px",right:"24px",width:"auto",height:"auto"},bg:{position:"fixed",bottom:"45px",right:0,width:"100px",height:"100%"},origin:{display:"block",position:"relative",margin:"0 0 15px",padding:0,width:"40px",height:"40px",lineHeight:"40px",color:"#fff",backgroundColor:t,borderRadius:"50%",cursor:"pointer",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.2)"},large:{width:"56px",height:"56px",lineHeight:"56px"},spec:{},normal:{},spec_item:{backgroundColor:e,transform:"rotate(0deg)"},spec_focus:{backgroundColor:r,transition:"all 450ms 0ms",transform:"rotate(45deg)"},normal_focus:{transition:"all 450ms 0ms",boxShadow:"0 5px 11px 0 rgba(0,0,0,0.18), 0 4px 15px 0 rgba(0,0,0,0.15)"},spec_icon:{},normal_icon:{},icon:{display:"block",width:"100%",height:"100%",border:"none",backgroundPosition:"center",backgroundRepeat:"no-repeat"},ul:{display:"-webkit-flex",position:"initial",flexFlow:"column nowrap",listStyle:"none",padding:0,margin:0,opacity:0,visibility:"hidden",transition:"opacity 1s ease"},li:{margin:0},ul_hori:{display:"-webkit-flex",position:"absolute",flexFlow:"row nowrap",listStyle:"none",right:"48px"},li_hori:{margin:"0 15px 0 0"}};return n},l=function(t){t.icon.style.backgroundImage="url("+t.icon.path+")",t.color?t.style.backgroundColor=t.color:t.color=t.style.backgroundColor;var r="anchor"==t.type?"":t.tooltip.text?t.tooltip.text:t[t.tooltip.target];return e.createElement("a",{style:t.style,className:t.waves,"data-tooltip":r,"data-tooltip-position":t.tooltip.position,"data-tooltip-delay":t.tooltip.delay},e.createElement("i",{id:t.id,type:t.type,name:t.name,color:t.color,style:t.icon.style,onClick:function(e){return t.onClick(e)},onMouseOver:function(e){return t.onMouseOver(e)},onMouseOut:function(e){return t.onMouseOut(e)}}))},c=function(t){return e.createElement("li",{id:t.id,style:t.child?t.style.li:t.style.li_hori,onMouseLeave:function(e){return t.onMouseLeave(e)}},e.createElement(l,t.btn_props),t.child&&t.child.length>0&&e.createElement("ul",{type:"hori",style:a({},t.style.ul,t.style.ul_hori)},t.child))},p=function(t){function p(){var e,t,o,i;r(this,p);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return t=o=n(this,(e=p.__proto__||Object.getPrototypeOf(p)).call.apply(e,[this].concat(l))),o.state={keys:[],items:{}},o.style=s(),o.maxWidth=-1,i=t,n(o,i)}return o(p,t),i(p,[{key:"btnClickHandler",value:function(e){var t=$(e.target).attr("id");this.props.onAction&&this.props.onAction(e,t)}},{key:"btnMouseOverHandler",value:function(e){var t=$(e.target),r=t.attr("type"),n=a({},this.style);"spec"==r?t.parent().css(a({},n.spec,n.spec_focus)):(t.parent().css(a({},n.normal,n.normal_focus)),t.parent().next()&&t.parent().next().is("ul")&&($(this.refs.root).find("ul[type=hori]").css("opacity",0).css("visibility","hidden"),t.parent().next().css("opacity",1).css("visibility","visible"))),$(this.refs.root).width(this.maxWidth+100)}},{key:"btnMouseOutHandler",value:function(e){var t=$(e.target),r=t.attr("type"),n=a({},this.style),o=t.attr("color");"spec"==r?t.parent().css(a({},n.origin,n.large,n.spec_item)):(o&&(n.origin.backgroundColor=o),t.parent().css(a({},n.origin)))}},{key:"fabMouseOutHandler",value:function(e){var t=a({},this.style);$(e.target).find("fab").find("ul").css("opacity",0).css("visibility","hidden"),$(this.refs.root).css(a({},t.bg))}},{key:"liMouseLeaveHandler",value:function(e){}},{key:"componentWillMount",value:function(){var e=Object.keys(this.props.items),t=a({},this.props.items);e.length>1&&(e.splice(1,0,"anchor"),t.anchor={name:"更多",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAANElEQVQ4T+3GMQ0AIAwAMAwSEvwLACai3HtmAHq1te8xpnCM6okAu3rigFU9MWxLr/695AI0E1VgH26hCQAAAABJRU5ErkJggg=="}),this.setState({keys:e,items:t})}},{key:"componentDidMount",value:function(){var e=this,t=$("fab"),r=$(t.children()[2]);r.is("ul")&&r.children().map(function(t,r){var n=$(r).find("ul");n&&(n.width()>e.maxWidth&&(e.maxWidth=n.width()),n.css("top",t*n.height()+"px"))})}},{key:"componentWillUnmount",value:function(){this.setState({keys:[],items:{}})}},{key:"render",value:function(){var t=this,r=a({},this.style),n=void 0,o=void 0,i=[],s=this.state.keys,p=function(e,r,n,o,i,a,s){var l=o.name,c=o.color,p=o.icon;return{id:e,type:r,style:n,name:l,color:c,tooltip:a,waves:s,icon:{style:i,path:p},onClick:function(e){return t.btnClickHandler(e)},onMouseOver:function(e){return t.btnMouseOverHandler(e)},onMouseOut:function(e){return t.btnMouseOutHandler(e)}}},u=function(r,n,o,i,a,s){var l=p(n,"normal",o.origin,r,o.icon,a,s);return e.createElement(c,{id:n,child:i,style:o,btn_props:l,onMouseLeave:function(e){return t.liMouseLeaveHandler(e)}})};s.length>0&&(r.spec=a({},r.origin,r.large,r.spec_item),n=e.createElement(l,p(s[0],"spec",r.spec,this.state.items[s[0]],r.icon,this.props.tooltip,this.props.waves))),s.length>1&&(o=e.createElement(l,p(s[1],"anchor",r.origin,this.state.items[s[1]],r.icon,this.props.tooltip,this.props.waves)));for(var d=s.length-1;d>=2;d--){var f=[],h=this.state.items[s[d]].items;if(h)for(var m=Object.keys(h),g=0;g<m.length;g++)f.push(u(h[m[g]],m[g],r,void 0,this.props.tooltip,this.props.waves));i.push(u(this.state.items[s[d]],s[d],r,f,this.props.tooltip,this.props.waves))}return i.length>0&&(i=e.createElement("ul",{style:r.ul},i)),e.createElement("fab-bg",{ref:"root",style:r.bg,onMouseLeave:function(e){return t.fabMouseOutHandler(e)}},e.createElement("fab",{style:r.root},n,o,i))}}]),p}(e.Component);p.defaultProps={items:{},tooltip:{},waves:void 0},p.propTypes={items:e.PropTypes.object,tooltip:e.PropTypes.object,waves:e.PropTypes.string,onAction:e.PropTypes.func},t.default=p}).call(t,r(2))},262:function(e,t,r){(function(t){"use strict";e.exports=t.Mousetrap=r(593)}).call(t,function(){return this}())},264:function(e,t,r){(function(e,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(t,r,n){I=n,P=r,T=$(t),o.render(e.createElement(L,{show:v.storage.current.controlbar}),u())}function u(){return T[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=t.elem=void 0;var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(107),h=a(f),m=r(189),g=a(m),b=r(48),y=a(b),v=r(8),w=r(190),x=a(w),k=r(21),A=a(k),E=r(11),_=r(19),C=a(_),O=r(43),M=a(O),S=r(195),j=i(S),R=void 0,T=void 0,P=void 0,I=void 0,N={target:"name",position:"bottom",delay:50},L=function(t){function r(){return s(this,r),l(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return c(r,t),d(r,[{key:"componentDidMount",value:function(){var e=this;E.browser.runtime.onMessage.addListener(function(t,r,o){t.type==C.MESSAGE_ACTION.export&&((new n).Render("已重新授权成功！"),E.br.isFirefox()?(new n).Render("请刷新本页才能生效。"):e.onAction(void 0,t.value.type))})}},{key:"onAction",value:function(e,t){var r=function(e,t){switch(t){case"exit":o.unmountComponentAtNode(u());break;case"top":$("html, body").animate({scrollTop:0},"normal");break;case"setting":h.Render(function(){return setTimeout(function(){return g.Render()},500)});break;case"siteeditor":g.Render();break;case"remove":(new n).Render("移动鼠标选择不想显示的内容，只针对本次有效。"),M.Start().done(function(e){$(e).remove()});break;case"highlight":(new n).Render("移动鼠标选择高亮区域，以便生成阅读模式，将会在页面刷新后失效。"),o.unmountComponentAtNode(u()),M.Start().done(function(e){I&&I(e)});break;default:if(t.indexOf("_")>0&&t.startsWith("share")||["save","markdown","png","epub","pdf","kindle","temp","html","dropbox","pocket","instapaper","linnk","yinxiang","evernote","onenote","gdrive"].includes(t)){var r=[$("head title").text().trim(),"",$(".simpread-focus-highlight").html().trim()],i=r[0],a=r[1],s=r[2];x.Action(t,i,a,s)}}};["exit","top"].includes(t)?r(e,t):A.Verify(function(o,i){o?(new n).Render("配置文件已更新，刷新当前页面后才能生效。","刷新",function(){return location.href=location.href}):r(e,t)})}},{key:"componentWillMount",value:function(){R=$.extend(!0,{},y.focusItems),(v.storage.current.site.name.startsWith("metaread::")||v.storage.current.site.name.startsWith("txtread::"))&&delete R.option}},{key:"componentWillUnmount",value:function(){$(this.refs.target).remove(),$("body").find(P).trigger("click","okay")}},{key:"render",value:function(){var t=this;return e.createElement("sr-rd-crlbar",{class:this.props.show?"":"controlbar",style:{zIndex:2147483647}},e.createElement(j.default,{ref:"target",tooltip:N,waves:"md-waves-effect md-waves-circle md-waves-float",items:R,onAction:function(e,r){return t.onAction(e,r)}}))}}]),r}(e.Component),W=new L;t.elem=W,t.Render=p}).call(t,r(2),r(10),r(33))},265:function(e,t,r){(function(e){"use strict";function n(e,t,r,n){e.each(function(e){var o,i=$(this);"add"===n?(o=void 0==i.attr("style")?"":i.attr("style"),i.attr("style",o+t).addClass(r)):"delete"===n&&(o=i.attr("style"),o=o.replace(t,""),i.attr("style",o).removeClass(r))})}function o(e,t){var r=i.pr.Exclude(e);"delete"==t?e.find(r).hide():"add"==t&&e.find(r).show()}var i=r(8).storage,a=(r(58),r(43)),s=r(264),l=r(37),c=r(49),p=function(){function t(){this.$target=null}var r,p,u="simpread-focus-highlight",d="z-index: 2147483646; overflow: visible; position: relative;",f="simpread-focus-mask",h="z-index: auto; opacity: 1; overflow: visible; transform: none; animation: none; position: relative;",m="simpread-focus-root",g="<div class="+m+"></div>",b="sr-controlbar-bg",y="<div class="+b+"></div>",v="."+b,w="."+m;return t.prototype.Render=function(e,a){for(this.$target=e,n(e,d,u,"add"),o(e,"delete"),r=e.parent(),p=r[0].tagName;"body"!=p.toLowerCase();)n(r,h,f,"add"),r=r.parent(),p=r[0].tagName;$("body").append(g),$("html").append(y),$(w).css({"background-color":a}).sreffect({opacity:1}),s.Render(v,w,function(e){i.pr.dom=e,t.prototype.Render($(e),i.current.bgcolor)}),l.Render(w),c.Render({root:w}),i.Statistics("focus"),$(w).on("click",function(t,a){if(("i"!=t.target.tagName.toLowerCase()||"exit"==t.target.id)&&$(t.currentTarget).attr("class")==m&&(i.current.mask||a))for($(w).sreffect({opacity:0},{complete:function(){n(e,d,u,"delete"),o(e,"add"),l.Exit(w),$(v).remove(),$(w).remove(),$(w).off("click")}}),r=e.parent(),p=r[0].tagName;p&&"body"!=p.toLowerCase();)n(r,h,f,"delete"),r=r.parent(),p=r[0].tagName})},t.prototype.GetFocus=function(t,r){var n,o,s,l=$.Deferred();if(!i.current.highlight||0!=t.length){for(;0==t.length;)if($("body").find("article").length>0)t=$("body").find("article");else try{if(n=window.getSelection(),o=n.getRangeAt(n.rangeCount-1),s=o.startContainer.nodeName,"body"===s.toLowerCase())throw"selection area is body tag.";t=$(o.startContainer.parentNode)}catch(e){return l.reject()}return l.resolve(t)}return(new e).Render("已启动手动聚焦模式，请移动鼠标进行选择，支持 ESC 退出。"),a.Start().done(function(e){t=$(e),l.resolve(t)}),l},t.prototype.Exist=function(e){return $("body").find("."+u).length>0&&(e&&s.elem.onAction(void 0,"setting"),!0)},t.prototype.Exit=function(){$(w).trigger("click","okay")},new t}();t.focus=p}).call(t,r(10))},268:function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(20),p=(o(c),r(16)),u=n(p),d=r(37),f=(o(d),function(t){function r(e){return i(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return s(r,t),l(r,[{key:"render",value:function(){var t=this,r=Object.keys(this.props.items).map(function(r){var n=t.props.items[r],o=Object.keys(t.props.items[r].items).map(function(n){var o=t.props.items[r].items[n];return e.createElement(u.default,{shape:"circle",icon:o.icon,fontIcon:o.fontIcon,color:"#fff",backgroundColor:o.color,waves:"md-waves-effect md-waves-button",tooltip:{text:o.name},onClick:function(){return t.props.onAction&&t.props.onAction(n)}})});return e.createElement("sr-opt-gp",null,e.createElement("sr-opt-label",null,n.name),e.createElement("actions",{style:{display:"flex",margin:"10px 0","flex-wrap":"wrap"}},o))});return e.createElement("action-bar",null,r)}}]),r}(e.Component));f.defaultProps={items:[]},f.propTypes={items:e.PropTypes.array,onAction:e.PropTypes.func},t.default=f}).call(t,r(2))},275:function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(8),p=r(16),u=o(p),d=function(t){function r(){var e,t,n,o;i(this,r);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=n=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(l))),n.state={category:[]},n.category={},o=t,a(n,o)}return s(r,t),l(r,[{key:"getCategory",value:function(){var e=this;Object.values(c.storage.plugins).forEach(function(t,r){e.category[t.category]?e.category[t.category].push(t):(e.category[t.category]=[],e.category[t.category].push(t))}),this.setState({category:Object.keys(this.category)})}},{key:"enable",value:function(e){var t=this,r=c.storage.plugins[e];r.enable=!r.enable,c.storage.Plugins(function(){(new n).Render("当前插件已"+(r.enable?"启用":"禁用")+"，请重新进入阅读模式以便生效。");var o=void 0==r.enable||1==r.enable?r.icon.bgColor:"#c3c6c7";$(t.refs[e].refs.mask).parent().css("background-color",o)},c.storage.plugins)}},{key:"componentWillMount",value:function(){var e=this;c.storage.Plugins(function(){e.category={},e.getCategory()})}},{key:"render",value:function(){var t=this,r=this.state.category.map(function(r){var n=t.category[r].map(function(r){var n=void 0==r.enable||1==r.enable?r.icon.bgColor:"#c3c6c7";return void 0==r.enable&&(r.enable=!0),e.createElement(u.default,{ref:r.id,shape:"circle",type:"flat",color:r.icon.color,backgroundColor:n,tooltip:{text:r.name},fontIcon:r.icon.type,waves:"md-waves-effect md-waves-button",onClick:function(){return t.enable(r.id)}})});return e.createElement("sr-opt-gp",null,e.createElement("sr-opt-label",null,r),e.createElement("actions",{style:{display:"flex",margin:"10px 0"}},n))});return 0==r.length&&r.push(e.createElement("plugin-bar-empty",{style:{"font-size":"17px!important",color:"rgba(51, 51, 51, 0.87)!important"},dangerouslySetInnerHTML:{__html:"暂无任何可用插件<br>请通过「选项页 → 插件管理」添加。"}})),e.createElement("plugin-bar",null,r)}}]),r}(e.Component);t.default=d}).call(t,r(2),r(10))},277:function(e,t,r){(function(e,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(t,r,n){$(t).append("<sharecard-bg></sharecard-bg>"),o.render(e.createElement(y,{title:r,content:n.replace(/\n/gi,"<br>")}),$("sharecard-bg")[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(64),f=a(d),h=r(20),m=a(h),g=r(16),b=i(g),y=function(t){function r(){return s(this,r),l(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return c(r,t),u(r,[{key:"download",value:function(){var e=this;f.PNG($("sharecard-card")[0],"simpread-"+this.props.title+".png",function(t){!t&&(new n).Render(2,"下载失败，请稍后再试！"),t&&e.exit()})}},{key:"exit",value:function(){o.unmountComponentAtNode($("sharecard-bg")[0])}},{key:"componentWillUnmount",value:function(){$("sharecard-bg").remove()}},{key:"render",value:function(){var t=this;return e.createElement("sharecard",null,e.createElement("sharecard-head",null,e.createElement("sharecard-card",null,e.createElement("sharecard-top",null,e.createElement("span",{className:"logos"}),"简 悦"),e.createElement("sharecard-content",{dangerouslySetInnerHTML:{__html:this.props.content}}),e.createElement("sharecard-via",null,"摘自 《",this.props.title,"》"),e.createElement("sharecard-footer",null,e.createElement("div",null,e.createElement("span",{className:"qrcode"}),e.createElement("span",{style:{display:"none"},dangerouslySetInnerHTML:{__html:"长按扫码<br>获取简悦"}})),e.createElement("div",null,"还原阅读本质 · 提升阅读体验")))),e.createElement("sharecard-control",null,e.createElement(b.default,{type:"raised",text:"保 存",width:"100%",color:"#fff",backgroundColor:"#2196F3",icon:m.IconPath("save_icon"),waves:"md-waves-effect md-waves-button",onClick:function(){return t.download()}}),e.createElement(b.default,{type:"raised",text:"关 闭",width:"100%",fontIcon:'<i class="fas fa-window-close"></i>',color:"#fff",backgroundColor:"#2196F3",waves:"md-waves-effect md-waves-button",onClick:function(){return t.exit()}})))}}]),r}(e.Component);t.Render=p}).call(t,r(2),r(10),r(33))},278:function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(8),u=r(21),d=i(u),f=r(16),h=o(f),m=function(t){function r(){var e,t,n,o;a(this,r);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return t=n=s(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(l))),n.state={category:[]},o=t,s(n,o)}return l(r,t),c(r,[{key:"active",value:function(e){var t=e.pop();Object.keys(p.storage.pr.sites).forEach(function(r){r==t?p.storage.pr.sites[t].forEach(function(t){JSON.stringify(t)==JSON.stringify(e)?t[1].active=!0:delete t[1].active}):p.storage.pr.sites[r].forEach(function(e){delete e[1].active})}),p.storage.Writesite(p.storage.pr.sites,function(){d.SendMessage("site",!0),(new n).Render("已成功切到换到此适配站点，请刷新本页。")})}},{key:"componentWillMount",value:function(){var e={};!p.storage.pr.current.site.matching&&(p.storage.pr.current.site.matching=[]),p.storage.pr.current.site.matching.forEach(function(t){e[t[2]]?e[t[2]].push(t):e[t[2]]=[t]}),this.setState({category:e})}},{key:"render",value:function(){var t=this,r=Object.keys(this.state.category).map(function(r){var n=t.props.labels[r],o=t.state.category[r].map(function(r){var n=[r[1],r[2]],o=n[0],i=n[1],a=o.info?o.info.title:"点击后默认进入当前站点",s="person"!=i?"#fff":o.info.color,l="person"!=i?t.props.bgColors[i]:o.info.bgColor;return e.createElement(h.default,{shape:"circle",type:"flat",color:s,backgroundColor:l,fontIcon:t.props.icons[i],tooltip:{text:a+(o.active?"（已启用）":"（未启用）")},waves:"md-waves-effect md-waves-button",onClick:function(){return t.active(r)}})});return e.createElement("sr-opt-gp",null,e.createElement("sr-opt-label",null,n),e.createElement("actions",{style:{display:"flex",margin:"10px 0"}},o))});return 0==r.length&&r.push(e.createElement("site-bar-empty",{style:{"font-size":"17px!important",color:"rgba(51, 51, 51, 0.87)!important"}},"当前模式下无法使用此功能")),e.createElement("site-bar",null,r)}}]),r}(e.Component);m.defaultProps={bgColors:{global:"#fb584a",custom:"#fa9a3f",local:"#00a9f0"},labels:{global:"官方适配源",person:"站点集市适配源",custom:"第三方适配源",local:"自定义适配源"},icons:{global:'<i class="fas fa-globe"></i>',person:'<i class="fas fa-user"></i>',custom:'<i class="fas fa-newspaper"></i>',local:'<i class="fas fa-laptop"></i>'}},t.default=m}).call(t,r(2),r(10))},282:function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(20),f=i(d),h=r(11),m=r(19),g=i(m),b=r(66),y=o(b),v=r(48),w=i(v),x=r(190),k=i(x),A=r(21),E=i(A),_=r(105),C=i(_),O=r(8),M=r(65),S=i(M),j=r(106),R=o(j),T=r(268),P=o(T),I=r(275),N=o(I),L=r(278),W=o(L),z=r(195),D=o(z),H=r(292),B=o(H),U=r(37),G=i(U),F=void 0,Q=void 0,V={target:"name",position:"bottom",delay:50},J=function(t){function r(e){return a(this,r),s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return l(r,t),u(r,[{key:"verify",value:function(e){f.VerifyCustom(e,O.storage.current.custom)&&!F&&(F=(new n).Render({state:"holdon",content:'由于已使用自定义样式，设定 <b style="color: #fff;">有可能无效</b>，详细说明 <a href="http://ksria.com/simpread/docs/#/自定义样式" target="_blank">请看这里</a>',callback:function(){return F=void 0}}))}},{key:"componentDidMount",value:function(){var e=this;h.browser.runtime.onMessage.addListener(function(t,r,o){t.type==g.MESSAGE_ACTION.export&&((new n).Render("已重新授权成功！"),h.br.isFirefox()?(new n).Render("请刷新本页才能生效。"):e.onAction(void 0,t.value.type))}),C.Listen(function(t){e.onAction(void 0,t)}),S.Controlbar(void 0,function(t){e.onAction(void 0,t.detail.type)})}},{key:"onAction",value:function(e,t){var r=this;this.verify(t.split("_")[0]),S.Event("export",t);var o=function(e,t){r.props.multi&&["markdown","dropbox","yinxiang","evernote","onenote","gdrive"].includes(t)&&(new n).Render("当前为论坛类页面，不建议使用导出服务，有可能出现未知错误。");var o=function(){switch(!0){case["exit","setting","siteeditor","remove","highlight"].includes(t):r.props.onAction(t);break;case t.indexOf("_")>0&&(t.startsWith("fontfamily")||t.startsWith("fontsize")||t.startsWith("layout")):var e=[t.split("_")[0],t.split("_")[1]],o=e[0],i=e[1];Object.keys(f).forEach(function(e){return e.toLowerCase()==o&&f[e](i)}),r.props.onAction&&r.props.onAction(o,i);break;case t.indexOf("_")>0&&t.startsWith("theme"):var a=y.default.names.indexOf(y.default.theme);a=t.endsWith("prev")?--a:++a,a>=y.default.names.length&&(a=0),a<0&&(a=y.default.names.length-1),y.default.Change(y.default.names[a]),r.props.onAction&&r.props.onAction(t.split("_")[0],y.default.theme);break;case t.startsWith("dyslexia"):k.Action(t,$("sr-rd-title").text(),"",$("sr-rd-content").text());break;case"tempread"==t:if("temp"!=O.storage.pr.state)return(new n).Render("此功能只限临时阅读模式时使用。"),{v:void 0};var s=p({},O.storage.pr.current.site);O.storage.pr.dom&&(s.include=O.storage.pr.dom.outerHTML.replace(O.storage.pr.dom.innerHTML,"").replace(/<\/\S+>$/i,"")),delete s.html,h.browser.runtime.sendMessage(g.Add(g.MESSAGE_ACTION.temp_site,{url:location.href,site:s,uid:O.storage.user.uid,type:"temp"}));break;case t.startsWith("webdav_"):var l=[$("sr-rd-title").text().trim(),$("sr-rd-desc").text().trim(),$("sr-rd-content").html().trim()],c=l[0],u=l[1],d=l[2];k.Action(t,c,u,d);break;default:if(t.indexOf("_")>0&&t.startsWith("share")||["fullscreen","save","markdown","png","epub","pdf","kindle","temp","html","dropbox","pocket","instapaper","linnk","yinxiang","evernote","onenote","gdrive","jianguo","yuque"].includes(t)){var m=[$("sr-rd-title").text().trim(),$("sr-rd-desc").text().trim(),$("sr-rd-content").html().trim()],b=m[0],v=m[1],w=m[2];k.Action(t,b,v,w)}}}();if("object"===("undefined"==typeof o?"undefined":c(o)))return o.v};"exit"!=t?E.Verify(function(r,i){r?(new n).Render("配置文件已更新，刷新当前页面后才能生效。","刷新",function(){return location.href=location.href}):o(e,t)}):o(e,t)}},{key:"onChange",value:function(e,t){var r=[e.split("_")[0],e.split("_")[1]],n=r[0],o=r[1];S.Event("read_ui",{key:n,value:o,custom:t}),this.props.onAction&&this.props.onAction(n,o,t),this.verify(n)}},{key:"onPop",value:function(e){"open"==e?G.Render(".simpread-read-root","panel"):G.Exit(".simpread-read-root","panel")}},{key:"componentWillMount",value:function(){Q=$.extend(!0,{},w.readItems);try{O.storage.current.fap?(delete Q.exit,delete Q.option.items.setting,delete Q.fontfamily,delete Q.fontsize,delete Q.layout,delete Q.theme):delete Q.trigger,this.props.type.startsWith("txtread::")&&this.props.type.endsWith("::local")&&(delete Q.download,delete Q.readlater,delete Q.send,delete Q.share,delete Q.option),(this.props.type.startsWith("metaread::")||this.props.type.startsWith("txtread::"))&&delete Q.option,O.storage.Safe(function(){O.storage.secret.webdav.forEach(function(e){e=JSON.parse(e),Q.send.items["webdav_"+e.name]={name:e.name,icon:f.IconPath("webdav_icon"),color:"#00BCD4"}})}),O.storage.current.fap&&O.storage.Plugins(function(){!$.isEmptyObject(O.storage.plugins)&&O.storage.option.plugins.forEach(function(e){var t=O.storage.plugins[e];0==t.enable||1!=t.trigger&&"true"!=t.trigger||(Q.trigger.items["plugin_"+t.id]={name:t.name,fontIcon:t.icon.type,color:t.icon.bgColor})}),Q.trigger&&$.isEmptyObject(Q.trigger.items)&&delete Q.trigger})}catch(e){}!/chrome/gi.test(navigator.userAgent)&&delete Q.dyslexia}}]),u(r,[{key:"render",value:function(){var t=this,r=O.storage.current.fap?e.createElement(B.default,{items:["样式","动作","站点","插件"],autoHide:!1,waves:"md-waves-effect md-waves-circle md-waves-float",onOpen:function(){return t.onPop("open")},onClose:function(){return t.onPop("close")},onAction:function(e,r){return t.onAction(e,r)}},e.createElement(R.default,{option:O.storage.current,onChange:function(e,r){return t.onChange(e,r)}}),e.createElement(P.default,{items:Q,onAction:function(e){return t.onAction(void 0,e)}}),e.createElement(W.default,null),e.createElement(N.default,null)):e.createElement(D.default,{items:Q,tooltip:V,waves:"md-waves-effect md-waves-circle md-waves-float",onAction:function(e,r){return t.onAction(e,r)}});return e.createElement("sr-rd-crlbar",{class:this.props.show?"":"controlbar",style:{zIndex:"2"}},r)}}]),r}(e.Component);J.propTypes={onAction:e.PropTypes.func},t.default=J}).call(t,r(2),r(10))},283:function(e,t,r){(function(e){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(t){function a(){var e,t,o,i;r(this,a);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=o=n(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(l))),o.state={progress:o.props.offset},i=t,n(o,i)}return o(a,t),i(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){$(document).on("scroll",function(){return e.scrollEventHandle()})},1e3)}},{key:"componentWillUnmount",value:function(){$(document).off("scroll",this.scrollEventHandle())}},{key:"scrollEventHandle",value:function(){var e=document.documentElement.scrollTop/(document.documentElement.scrollHeight-document.documentElement.clientHeight);this.setState({progress:e})}},{key:"render",value:function(){var t=100*this.state.progress;return this.props.show&&e.createElement("read-process",{style:{width:t+"%"}})}}]),a}(e.Component);a.defaultProps={show:!0,offset:document.documentElement.scrollTop/(document.documentElement.scrollHeight-document.documentElement.clientHeight)||0},t.default=a}).call(t,r(2))},284:function(e,t,r){(function(e,n,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];y("read_start"),t&&m(),N.storage.pr.ReadMode(),"string"==typeof N.storage.pr.html.include&&N.storage.pr.html.include.startsWith("<sr-rd-content-error>")&&(N.storage.pr.Readability(),N.storage.pr.ReadMode()),o.render(e.createElement(ie,{read:N.storage.current,wrapper:N.storage.pr.html}),g())}function d(){var e=$.Deferred();return F.Start().done(function(t){e.resolve(t)}),e}function f(e){return te.find(ee).length>0&&(e&&j.Render(function(){return setTimeout(function(){return T.Render()},500)}),!0)}function h(){$(ee).sreffect({opacity:0},{delay:100,complete:function(e){o.unmountComponentAtNode(g())}}).addClass("simpread-read-root-hide")}function m(){if(N.storage.pr.isMathJax()&&"temp"==N.storage.pr.state){var e=N.storage.pr.MathJaxMode();if("undefined"==typeof e)(new n).Render("<a href='http://ksria.com/simpread/docs/#/词法分析引擎?id=智能感知' target='_blank' >智能感知</a> 失败，请移动鼠标框选。"),d().done(function(e){var t=function(e){N.storage.pr.TempMode("read",e),u(!1)};N.storage.current.highlight?F.Control(e).done(function(e){t(e)}):t(e)});else if("string"==typeof e){var t=N.storage.pr.GetDom(e,"html");N.storage.pr.Newsite("read",t)}else N.storage.pr.TempMode("read",e[0])}}function g(){return 0==te.find(ee).length&&te.append(q),$(ee)[0]}function b(e,t){var r=N.storage.pr.Exclude(e);e.find(r).remove()}function y(e){N.storage.Plugins(function(){N.storage.option.plugins.forEach(function(t){N.storage.plugins[t]&&V.Exec(e,N.storage.current.site.name,N.storage.plugins[t])})})}Object.defineProperty(t,"__esModule",{value:!0}),t.Highlight=t.Exit=t.Exist=t.Render=void 0;var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),x=r(283),k=a(x),A=r(285),E=i(A),_=r(282),C=a(_),O=r(286),M=i(O),S=r(107),j=i(S),R=r(189),T=i(R),P=r(105),I=i(P),N=r(8),L=r(66),W=a(L),z=r(20),D=i(z),H=r(11),B=r(19),U=i(B),G=r(43),F=i(G),Q=r(65),V=i(Q),J=r(37),K=i(J),Y=r(49),X=i(Y),Z="simpread-read-root",q='<div class="'+Z+'"></div>',ee="."+Z,te=$("html"),re="simpread-theme-root",ne=0,oe=function(){var t='<svg t="1556354786433" viewBox="0 0 1024 1024" version="1.1" width="33" height="33"><defs><style type="text/css"></style></defs><path d="M859.8 191.2c-80.8-84.2-212-84.2-292.8 0L512 248.2l-55-57.2c-81-84.2-212-84.2-292.8 0-91 94.6-91 248.2 0 342.8L512 896l347.8-362C950.8 439.4 950.8 285.8 859.8 191.2z" p-id="6225" fill="#8C8C8C"></path></svg>',r='<svg t="1556354650943" viewBox="0 0 1024 1024" version="1.1" p-id="5899" width="33" height="33"><defs><style type="text/css"></style></defs><path d="M458 576c2-36 0-76 16-110 4-10 2-20 2-30-8-42-28-80-30-120 0-2.78 2.008-9.542 2.01-12.314-6.432 4.468-15.214 8.048-22.01 10.314-40 12-35.02 5.146-69.02 27.146l-23.866 14.456c32.686-35.878 77.056-49.562 113.05-77.428 0.388-30.876 1.716-61.354 6.274-91.68C371.22 106.992 243.57 108.536 164.246 191.14c-90.994 94.688-90.994 248.202 0 342.89l305.698 318.192c-0.17-21.312-0.886-42.352-3.944-62.222C454 718 458 648 458 576z" p-id="5900" fill="#8C8C8C"></path><path d="M644 602c-22-52-66-88-126-100-1.7 0-3.758-1.086-5.872-2.638-0.046 0.214-0.082 0.426-0.128 0.638-22 96-46 188-42 284 0 24.454 7.966 50.234 7.666 76.262L512 896l208-216.5C690.306 658.542 660.856 637.242 644 602z" p-id="5901" fill="#8C8C8C"></path><path d="M859.748 191.14c-80.852-84.188-211.978-84.188-292.816 0L528 230.806c0.15 26.35 0.426 52.404-6 77.194-4 20-38 38-32 62 6.006 26.426 16.332 51.41 21.464 77.118C542.028 464.168 569.542 485.792 594 512c45.602 53.532 75.494 114.918 130.566 162.742l135.182-140.71C950.75 439.342 950.75 285.828 859.748 191.14z" p-id="5902" fill="#8C8C8C"></path></svg>',n=function(){H.browser.runtime.sendMessage(U.Add(U.MESSAGE_ACTION.CORB,{settings:{url:N.storage.service+"/sites/service/pending",type:"POST",data:{url:location.href,site:N.storage.pr.current.site,uid:N.storage.user.uid,type:"failed"}}}),function(e){}),H.browser.runtime.sendMessage(U.Add(U.MESSAGE_ACTION.new_tab,{url:"https://wj.qq.com/s2/3611463/7260/"}))};return e.createElement("sr-rd-footer",null,e.createElement("sr-rd-footer-group",null,e.createElement("sr-rd-footer-line",null),e.createElement("sr-rd-footer-text",null,"全文完"),e.createElement("sr-rd-footer-line",null)),e.createElement("sr-rd-footer-copywrite",null,e.createElement("div",null,"本文由 ",e.createElement("a",{href:"http://ksria.com/simpread",target:"_blank"},"简悦 SimpRead")," 优化，用以提升阅读体验"),e.createElement("div",{className:"second"},"使用了 ",e.createElement("abbr",null,"全新的简悦词法分析引擎",e.createElement("sup",null,"beta")),"，",e.createElement("a",{target:"_blank",href:"http://ksria.com/simpread/docs/#/词法分析引擎"},"点击查看"),"详细说明"),e.createElement("div",{className:"third"},e.createElement("a",{className:"sr-icon good sr-top","data-sr-mini-tooltip":"觉得不错？请帮忙投票 😄","data-position":"up",target:"_blank",href:"https://chrome.google.com/webstore/detail/%E7%AE%80%E6%82%A6-simpread/ijllcpnolfcooahcekpamkbidhejabll/reviews",dangerouslySetInnerHTML:{__html:t}}),e.createElement("a",{className:"sr-icon bad sr-top","data-sr-mini-tooltip":"有待改进，请帮忙吐槽 😄","data-position":"up",target:"_blank",onClick:function(){return n()},dangerouslySetInnerHTML:{__html:r}}))))},ie=function(t){function r(){return l(this,r),c(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return p(r,t),w(r,[{key:"verifyContent",value:function(){var e=this;return!($("sr-rd-content").text().length<100&&(0==ne?(new n).Render({content:"检测到正文获取异常，是否重新获取？",action:"是的",cancel:"取消",callback:function(t){"cancel"!=t&&(ne++,e.componentWillUnmount(),N.storage.pr.Readability(),u())}}):1==ne?(this.componentWillUnmount(),(new n).Render({content:'获取正文失败，是否使用 <a target="_blank" href="http://ksria.com/simpread/docs/#/手动框选">手动框选</a> 高亮的方式获取？',action:"是的",cancel:"取消",callback:function(e){"cancel"!=e&&setTimeout(function(){d().done(function(e){var t=function(e){ne++,N.storage.pr.TempMode("read",e),u()};N.storage.current.highlight?F.Control(e).done(function(e){t(e)}):t(e)})},200)}})):ne>=2&&(this.componentWillUnmount(),(new n).Render({content:"高亮无法仍无法适配此页面，是否提交？",action:"是的",cancel:"取消",callback:function(e){"cancel"!=e&&H.browser.runtime.sendMessage(U.Add(U.MESSAGE_ACTION.save_site,{url:location.href,site:{},uid:N.storage.user.uid,type:"failed"}))}}),ne=0),1))}},{key:"componentWillMount",value:function(){$("body").addClass("simpread-hidden"),W.default.Change(this.props.read.theme),N.storage.current.fap&&($("head").append('<link rel="stylesheet" class="simpread-fs-style" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/solid.min.css" />'),$("head").append('<link rel="stylesheet" class="simpread-fs-style" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/brands.min.css" />'),$("head").append('<link rel="stylesheet" class="simpread-fs-style" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/fontawesome.min.css" />'))}},{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=s(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ne>0)||this.verifyContent()){e.next=2;break}return e.abrupt("return");case 2:te.addClass("simpread-font").addClass(re).find(ee).addClass(re).sreffect({opacity:1},{delay:100}).addClass("simpread-read-root-show"),this.props.read.fontfamily&&D.FontFamily(this.props.read.fontfamily),this.props.read.fontsize&&D.FontSize(this.props.read.fontsize),this.props.read.layout&&D.Layout(this.props.read.layout),this.props.read.site.css&&this.props.read.site.css.length>0&&D.SiteCSS(this.props.read.site.css),D.Preview(this.props.read.custom),"txt"==N.storage.pr.state&&!location.href.endsWith(".md")&&$("sr-rd-content").css({"word-wrap":"break-word","white-space":"pre-wrap"}),""==$("sr-rd-desc").text().trim()&&$("sr-rd-desc").addClass("simpread-hidden"),b($("sr-rd-content"),this.props.wrapper.exclude),N.storage.pr.Beautify($("sr-rd-content")),N.storage.pr.Format(Z),I.Render($("sr-rd-content")),K.Render(ee),X.Render({root:ee}),N.storage.Statistics("read"),!this.props.wrapper.avatar&&this.props.read.toc&&M.Render("sr-read",$("sr-rd-content"),this.props.read.theme,this.props.read.toc_hide),this.props.wrapper.avatar&&$(".simpread-read-root").addClass("simpread-multi-root"),y("read_complete"),setTimeout(function(){t.verifyContent()},50);case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentWillUnmount",value:function(){V.Event("read_end"),y("read_end"),D.FontSize(""),te.removeClass(re).removeClass("simpread-font"),te.attr("style")&&te.attr("style",te.attr("style").replace("font-size: 62.5%!important","")),D.SiteCSS(),$("body").removeClass("simpread-hidden"),$(ee).remove(),K.Exit(ee)}},{key:"onAction",value:function(e,t,r){switch(e){case"exit":this.exit();break;case"setting":j.Render(function(){return setTimeout(function(){return T.Render()},500)});break;case"siteeditor":$("panel-bg").length>0&&$("panel-bg")[0].click(),setTimeout(function(){return T.Render()},500);break;case"fontfamily":case"fontsize":case"layout":case"theme":case"shortcuts":case"custom":"custom"!=e?N.storage.current[e]=t:N.storage.current.custom.art[r]=t,N.storage.Setcur(N.storage.current.mode);break;case"remove":$("panel-bg").length>0&&$("panel-bg").trigger("click"),(new n).Render({content:"移动鼠标选择不想显示的内容，可多次选择，使用 ESC 退出。",delay:5e3}),F.Multi(function(e){var t=N.storage.pr.Utils().dom2Xpath(e),r=v({},N.storage.pr.current.site);if(r.exclude.push("[[`"+t+"`]]"),"temp"==N.storage.pr.state){var n=N.storage.pr.Utils().dom2Xpath(N.storage.pr.dom);r.include="[[`"+n+"`]]",r.name=r.name.replace("tempread::","")}N.storage.pr.Updatesite("local",N.storage.current.url,[r.url,N.storage.pr.Cleansite(r)]),N.storage.Writesite(N.storage.pr.sites,function(){N.storage.pr.current.site.name=r.name,N.storage.pr.current.site.include=r.include}),$(e).remove()});break;case"highlight":(new n).Render('移动鼠标选择高亮区域，以便生成阅读模式，此模式将会在页面刷新后失效，详细说明请看 <a href="http://ksria.com/simpread/docs/#/重新高亮" target="_blank">重新高亮</a>'),this.exit(),d().done(function(e){var t=function(e){N.storage.pr.TempMode("read",e),u()};N.storage.current.highlight?F.Control(e).done(function(e){t(e)}):t(e)})}}},{key:"exit",value:function(){h()}},{key:"render",value:function(){var t=this,r=this.props.wrapper.avatar&&this.props.wrapper.avatar.length>0?e.createElement(E.Multiple,{include:this.props.wrapper.include,avatar:this.props.wrapper.avatar}):e.createElement("sr-rd-content",{dangerouslySetInnerHTML:{__html:this.props.wrapper.include}}),n=this.props.wrapper.paging&&this.props.wrapper.paging.length>0&&e.createElement(E.Paging,{paging:this.props.wrapper.paging});return e.createElement("sr-read",null,e.createElement(k.default,{show:this.props.read.progress}),e.createElement("sr-rd-title",null,this.props.wrapper.title),e.createElement("sr-rd-desc",null,this.props.wrapper.desc),r,n,e.createElement(oe,null),e.createElement(C.default,{show:this.props.read.controlbar,multi:!!this.props.wrapper.avatar,type:this.props.wrapper.name,site:{title:this.props.wrapper.title,url:window.location.href},custom:this.props.read.custom,onAction:function(e,r,n){return t.onAction(e,r,n)}}))}}]),r}(e.Component);t.Render=u,t.Exist=f,t.Exit=h,t.Highlight=d}).call(t,r(2),r(10),r(33))},285:function(e,t,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Paging=t.Multiple=void 0;var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(16),p=o(c),u=r(105),d=n(u),f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAOVBMVEX///+AgICfn5+Hh4f39/fPz8+vr6+QkJDg4ODv7+/n5+fAwMCoqKiYmJjHx8fX19e4uLjQ0NDIyMhhw/XSAAACBUlEQVRYw6VX2ZKEIAw0ATnk8Pj/j90q3V13SSOxpl+mHEknaUKCUw9xTZnpBLu02ukV4lGoAR9Rbb4Xgii7ztxTF35/ay4p1kdzm2mI/KDn4kkB0w3iICVmbO9IDae31zMkoo8YZkJgl5IrGh1WpHaN34VdDUks//YfrNjsn/cO8NtnAedhivl+G6D9kCH8Buhl/JptLv0dLMIcuqnTBY8TGCdhelvohfGjI3mEEybYZKGdZTKokcfNipCXpg4IysgoMAwDl5KegFGwy2cEYZpfEBQkAjpnehFpQ2HRCwKeDKHdhQiQgGBcEE5NgEWwhgAm/eSo2BchmAXMPUMwBSaEYlE/0RPIGWxLb8BkwiiLam6n/kgzx+3+IOoSBGSbr5+0nN43cz0SnE9Wpr9O0/qz2psf0jCtTrqSR8zFK2lu1D5FjZtpnLX1wfGu/Pxn3e8QillUXGxa3A07J8fimjqb9tixrD8JXJJ8UQp7NcN6n7LrScvQTLAqxtEItTm0/r5wKOH/j9AgutAIc5MzE4VXBLa56UUjOsAwB2+bhuteprCIf9wr+yp7tl5H7C0TzW/tZQwaJQ+i2mX2w92M/BBpMEMhkiGzPtOXhyBCGaYZPFHBH6l2z90cRcfh3QJr8lWjsq1nn2Xe0hHCEvaUmL/btRaxyo/vFKdXiCFlPmk8u9rvdl/WWxJO0oeE7gAAAABJRU5ErkJggg==",h=t.Multiple=function(t){
function r(){return i(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return s(r,t),l(r,[{key:"render",value:function(){var t=[],r=this.props.avatar[0].name,n=this.props.avatar[1].url;this.props.include.each(function(e,o){var i={};i.name=$(r[e]).text(),i.url=$(n[e]).attr("src"),i.content=$(o).html(),!i.url&&(i.url=f),t.push(i)});var o=t.map(function(t){return e.createElement("sr-rd-mult",null,e.createElement("sr-rd-mult-avatar",null,e.createElement("img",{src:t.url}),e.createElement("span",null,t.name)),e.createElement("sr-rd-mult-content",{dangerouslySetInnerHTML:{__html:t.content}}))});return e.createElement("sr-rd-content",null,o)}}]),r}(e.Component);h.defaultProps={include:e.PropTypes.any,avatar:e.PropTypes.array};var m=t.Paging=function(t){function r(){var e,t,n,o;i(this,r);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=n=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(l))),n.state={prev:n.props.paging[0].prev,next:n.props.paging[1].next},o=t,a(n,o)}return s(r,t),l(r,[{key:"onClick",value:function(e){location.href=this.state[e]}},{key:"componentDidMount",value:function(){var e=this;d.Bind(["left","right"],function(t,r){e.onClick("left"==r?"prev":"next")})}},{key:"render",value:function(){var t=this;return!(!this.state.prev&&!this.state.next)&&e.createElement("sr-page",null,e.createElement(p.default,{type:"raised",text:"← 前一页",disable:!this.state.prev,style:{"margin-left":"0"},color:"#fff",backgroundColor:"#1976D2",waves:"md-waves-effect md-waves-button",onClick:function(){return t.onClick("prev")}}),e.createElement(p.default,{type:"raised",text:"后一页 →",disable:!this.state.next,style:{"margin-right":"0"},color:"#fff",backgroundColor:"#1976D2",waves:"md-waves-effect md-waves-button",onClick:function(){return t.onClick("next")}}))}}]),r}(e.Component);m.defaultProps={paging:e.PropTypes.array}}).call(t,r(2))},286:function(e,t,r){(function(e,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(t,n,o,i){var a=[],s=i?"toc-bg-hidden":"";n.find("h1, h2, h3, h4").map(function(e,t){var r=$(t),n=r[0].tagName.toLowerCase(),o=r.text(),i=r.attr("id");i=void 0==i?"sr-toc-"+e:i+"-"+e,r.attr("id",i),o&&a.push({level:"toc-level-"+n,id:i,value:o})}),$(t).append("<toc-bg class="+s+"></tocbg>"),a.length>1&&r.render(e.createElement(c,{hidden:i,table:a,theme:o}),$("toc-bg")[0])}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=!1,c=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),s(r,[{key:"onClick",value:function(e){try{l=!0;for(var t=$(e.target).parent();t.is("a");)t=t.parent();if(t.is("toc"))return;t.parent().find("active").removeClass("toc-outline-active"),t.find("active").addClass("toc-outline-active");var r=t.find("a").attr("href"),n="#"===r?0:$(r).offset().top-5;$("html").stop().animate({scrollTop:n},300,function(){setTimeout(function(){return l=!1},500)}),e.preventDefault()}catch(e){}}},{key:"componentDidMount",value:function(){var e=void 0,t=$("toc"),r=t.outerHeight(),n=t.find("a"),o=n.map(function(){var e=$($(this).attr("href"));if(e.length)return e}),i=function(){if(!l){var t=$(window).scrollTop()+r,i=o.map(function(){if($(this).offset().top<t)return this});i=i[i.length-1];var a=i&&i.length?i[0].id:"";e!==a&&(e=a,""==a&&(a="sr-toc-0"),n.parent().find("active").removeClass("toc-outline-active"),n.filter("[href='#"+a+"']").parent().find("active").addClass("toc-outline-active"))}};$(window).scroll(i),$("outline").map(function(e,t){$(t).width(180-parseInt($(t).css("padding-left")))}),0==this.props.hidden&&$("toc").css({width:"initial"}),i()}},{key:"render",value:function(){var t=this,r=this.props.table.map(function(r){return e.createElement("outline",{className:r.level,onClick:function(e){return t.onClick(e)}},e.createElement("active",null),e.createElement("a",{className:"toc-outline-theme-"+t.props.theme,href:"#"+r.id},e.createElement("span",null,r.value)))});return e.createElement("toc",{className:"simpread-font simpread-theme-root"},r)}}]),r}(e.Component);t.Render=a}).call(t,r(2),r(33))},292:function(e,t,r){(function(e,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(){var e="rgba(244, 67, 54, 1)",t="rgba(245, 82, 70, .8)",r="rgba(243, 52, 38, .9)",n={root:{display:"-webkit-box",WebkitBoxAlign:"center",WebkitBoxOrient:"vertical",WebkitBoxDirection:"reverse",position:"fixed",bottom:"45px",right:"24px",width:"auto",height:"auto"},origin:{display:"block",position:"relative",margin:"0 0 15px",padding:0,width:"40px",height:"40px",lineHeight:"40px",color:"#fff",backgroundColor:t,borderRadius:"50%",cursor:"pointer",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.2)"},large:{width:"56px",height:"56px",lineHeight:"56px",zIndex:2},spec:{},normal:{},spec_item:{backgroundColor:e,transform:"rotate(0deg)"},spec_focus:{backgroundColor:r,transition:"all 450ms 0ms",transform:"rotate(45deg)"},normal_focus:{transition:"all 450ms 0ms",boxShadow:"0 5px 11px 0 rgba(0,0,0,0.18), 0 4px 15px 0 rgba(0,0,0,0.15)"},spec_icon:{},normal_icon:{},icon:{display:"block",width:"100%",height:"100%",border:"none",backgroundPosition:"center",backgroundRepeat:"no-repeat"},panel_bg:{display:"none",position:"fixed",top:0,left:0,width:"100%",height:"100%"}};return n},c=function(){var e={activeColor:"rgba(0, 137, 123, .8)",root:{display:"-webkit-flex",flexDirection:"column",position:"absolute",right:"32px",bottom:"185px",minWidth:"380px",minHeight:"300px",maxWidth:"500px",width:"100%",margin:0,padding:"39px 24px 0",color:"rgba(0, 0, 0, 0.870588)",backgroundColor:"rgb(255, 255, 255)",borderRadius:"3px",boxSizing:"border-box",boxShadow:"0 0 2px rgba(0,0,0,0.12), 0 2px 2px rgba(0,0,0,0.26)",opacity:0,visibility:"hidden",transition:"opacity 300ms ease",zIndex:2147483647},panel_tabs:{display:"flex",flexDirection:"row",justifyContent:"space-around",fontSize:"14px",borderBottom:"2px solid #E0E0E0"},panel_tab:{position:"relative",padding:"0px 24px 5px 24px",width:"100%",cursor:"pointer"},panel_tab_label:{display:"-webkit-box",flexShrink:1,WebkitLineClamp:1,"-webkit-box-orient":"vertical",overflow:"hidden",textOverflow:"ellipsis"},panel_border:{position:"absolute",bottom:0,left:0,right:0,marginBottom:"-2px",fontWeight:500,color:"#3273dc",borderBottom:"2px solid ",transform:"scaleX(0)",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},panel_border_active:{transform:"scaleX(1)"},groups:{display:"block",width:"100%",overflowY:"auto"},group:{display:"none",padding:"39px 0px 10px"},group_active:{display:"block",opacity:1}};return e},p=function(t){function r(){var e,t,i,a;n(this,r);for(var s=arguments.length,l=Array(s),p=0;p<s;p++)l[p]=arguments[p];return t=i=o(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(l))),i.style=c(),a=t,o(i,a)}return i(r,t),s(r,[{key:"onTabChange",value:function(e){for(var t=a({},this.style),r=$(e.target),n=r.attr("active"),o=r.attr("idx"),i=e.target.tagName.toLowerCase();"panel-tab"!=i;)r=r.parent(),n=r.attr("active"),o=r.attr("idx"),i=r[0].tagName.toLowerCase();if("false"==n){var s=$("panel-tab[active=true]");r.attr("active",!0),r.find("panel-border").css(a({},t.panel_border,t.panel_border_active)),s.attr("active",!1),s.find("panel-border").css(a({},t.panel_border)),$("panel-group[idx="+o+"]").attr("active",!0).css(a({},t.group,t.group_active)),$("panel-group[idx!="+o+"]").attr("active",!1).css(a({},t.group))}}},{key:"autoHeight",value:function(){var e=0;$("panel-groups").children().map(function(t,r){0==e?e=$(r).height():$(r).height()>e&&(e=$(r).height())}),$("panel-groups").height(e)}},{key:"offsetHeight",value:function(){var e=$(this.refs.panel),t=e.position().top,r=e.find("panel-groups"),n=r.height();t<0&&r.height(n+t-32).css({"padding-right":"20px"})}},{key:"componentDidMount",value:function(){$(this.refs.panel).css("opacity",1).css("visibility","visible"),0==this.props.autoHeight&&this.autoHeight(),this.offsetHeight(),this.props.onOpen()}},{key:"componentWillUnmount",value:function(){this.props.onClose()}},{key:"render",value:function(){var t=this,r=a({},this.style);r.panel_border.borderBottom=r.panel_border.borderBottom+(this.props.activeColor?this.props.activeColor:r.activeColor);var n=a({},r.panel_border,r.panel_border_active),o=a({},r.group,r.group_active),i=this.props.tabAutoSel?{onMouseEnter:function(e){return t.onTabChange(e)}}:{onClick:function(e){return t.onTabChange(e)}},s=this.props.items.map(function(t,o){return e.createElement("panel-tab",a({style:r.panel_tab,active:0==o?"true":"false",idx:o},i),e.createElement("span",{style:r.panel_tab_label},t),e.createElement("panel-border",{style:0==o?n:a({},r.panel_border)}))}),l=this.props.children.map(function(t,n){return e.createElement("panel-group",{style:0==n?o:a({},r.group),active:0==n?"true":"false",idx:n},t)});return e.createElement("panel",{ref:"panel",style:r.root},e.createElement("panel-tabs",{style:r.panel_tabs},s),e.createElement("panel-groups",{style:r.groups},l))}}]),r}(e.Component);p.defaultProps={items:[],autoHeight:!1,activeColor:void 0},p.propTypes={item:e.PropTypes.array,autoHeight:e.PropTypes.bool,activeColor:e.PropTypes.string,onOpen:e.PropTypes.func,onClose:e.PropTypes.func};var u=function(t){t.icon.style.backgroundImage="url("+t.icon.path+")",t.color?t.style.backgroundColor=t.color:t.color=t.style.backgroundColor;var r="anchor"==t.type?"":t.tooltip.text?t.tooltip.text:t[t.tooltip.target];return e.createElement("a",{style:t.style,className:t.waves,"data-tooltip":r,"data-tooltip-position":t.tooltip.position,"data-tooltip-delay":t.tooltip.delay},e.createElement("i",{id:t.id,type:t.type,name:t.name,color:t.color,style:t.icon.style,onClick:function(e){return t.onClick(e)},onMouseOver:function(e){return t.onMouseOver(e)},onMouseOut:function(e){return t.onMouseOut(e)}}))},d=function(t){function c(){var e,t,r,i;n(this,c);for(var a=arguments.length,s=Array(a),p=0;p<a;p++)s[p]=arguments[p];return t=r=o(this,(e=c.__proto__||Object.getPrototypeOf(c)).call.apply(e,[this].concat(s))),r.style=l(),i=t,o(r,i)}return i(c,t),s(c,[{key:"btnClickHandler",value:function(e){var t=$(e.target).attr("id");this.props.onAction&&this.props.onAction(e,t)}},{key:"btnMouseOverHandler",value:function(e){var t=a({},this.style),r=$(e.target),n=r.attr("type");r.attr("active"),"spec"==n?r.parent().css(a({},t.spec,t.spec_focus)):this.panelRender($(this.refs.bg))}},{key:"btnMouseOutHandler",value:function(e){var t=a({},this.style),r=$(e.target),n=r.attr("type");r.attr("color"),"spec"==n&&r.parent().css(a({},t.origin,t.large,t.spec_item))}},{key:"panelBgEventHandler",value:function(e){var t=this;"panel-bg"==e.target.tagName.toLowerCase()&&!function(){var e=$(t.refs.bg),n=a({},t.style);e.animate({opacity:0},{complete:function(){r.unmountComponentAtNode(e[0]),e.css(a({},n.panel_bg))}})}()}},{key:"panelRender",value:function(t){var n=this;if(t.length>0){var o=a({},this.style);t.css(a({},o.panel_bg,{display:"block",opacity:1})),r.render(e.createElement(p,a({},this.props,{onOpen:function(){return n.onPop("onOpen")},onClose:function(){return n.onPop("onClose")}})),t[0])}}},{key:"onPop",value:function(e){this.props[e]&&this.props[e]()}},{key:"render",value:function(){var t=this,r=a({},this.style);r.spec=a({},r.origin,r.large,r.spec_item);var n=this.props.autoHide?{onMouseOver:function(e){return t.panelBgEventHandler(e)}}:{onClick:function(e){return t.panelBgEventHandler(e)}},o=function(e,r,n,o,i,a,s){var l=o.name,c=o.color,p=o.icon;return{id:e,type:r,style:n,name:l,color:c,tooltip:a,waves:s,icon:{style:i,path:p},onClick:function(e){return t.btnClickHandler(e)},onMouseOver:function(e){return t.btnMouseOverHandler(e)},onMouseOut:function(e){return t.btnMouseOutHandler(e)}}},i=e.createElement(u,o("exit","spec",r.spec,this.props.triggerItems.exit,r.icon,{target:"name",delay:50},this.props.waves)),s=e.createElement(u,o("anchor","anchor",r.origin,this.props.triggerItems.anchor,r.icon,{target:"name",delay:50},this.props.waves)),l=e.createElement("panel-bg",{ref:"bg"});return e.createElement("fap",a({style:r.root},n),i,s,l)}}]),c}(e.Component);d.defaultProps={items:[],autoHeight:!1,activeColor:void 0,autoHide:!0,tabAutoSel:!0,triggerItems:{exit:{name:"关闭",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAdklEQVQ4y+WTuQ3AIBAEaQKK8NN/BEUArmccgGyj43MMIZo5TqtFqbUPJxYtbg2OvS44IJQKhguwdUETSiXjXr77KhGICRjihWKm8Dw3KXP4Z5VZ/Lfw7B5kyD1cy5C7uAx5iJcht6vhRTUi4OrC0Szftvi/vAFNdbZ2Dp661QAAAABJRU5ErkJggg=="},anchor:{name:"更多",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAANElEQVQ4T+3GMQ0AIAwAMAwSEvwLACai3HtmAHq1te8xpnCM6okAu3rigFU9MWxLr/695AI0E1VgH26hCQAAAABJRU5ErkJggg=="}},waves:void 0},d.propTypes={item:e.PropTypes.array,autoHeight:e.PropTypes.bool,activeColor:e.PropTypes.string,autoHide:e.PropTypes.bool,tabAutoSel:e.PropTypes.bool,triggerItems:e.PropTypes.object,waves:e.PropTypes.string,onOpen:e.PropTypes.func,onClose:e.PropTypes.func,onAction:e.PropTypes.func},t.default=d}).call(t,r(2),r(33))},497:function(e,t,r){t=e.exports=r(5)(),t.push([e.id,'a[data-sr-mini-tooltip].sr-top:after,a[data-sr-mini-tooltip].sr-top:before{-webkit-transform:translateY(10px);transform:translateY(10px)}a[data-sr-mini-tooltip].sr-top:hover:after,a[data-sr-mini-tooltip].sr-top:hover:before{-webkit-transform:translateY(0);transform:translateY(0)}a[data-sr-mini-tooltip].right:after,a[data-sr-mini-tooltip].right:before{-webkit-transform:translateX(0);transform:translateX(0)}a[data-sr-mini-tooltip].right:hover:after,a[data-sr-mini-tooltip].right:hover:before{-webkit-transform:translateX(10px);transform:translateX(10px)}a[data-sr-mini-tooltip].bottom:after,a[data-sr-mini-tooltip].bottom:before{-webkit-transform:translateY(-10px);transform:translateY(-10px)}a[data-sr-mini-tooltip].bottom:hover:after,a[data-sr-mini-tooltip].bottom:hover:before{-webkit-transform:translateY(0);transform:translateY(0)}a[data-sr-mini-tooltip].left:after,a[data-sr-mini-tooltip].left:before{-webkit-transform:translateX(0);transform:translateX(0)}a[data-sr-mini-tooltip].left:hover:after,a[data-sr-mini-tooltip].left:hover:before{-webkit-transform:translateX(-10px);transform:translateX(-10px)}a[data-sr-mini-tooltip]{position:relative}a[data-sr-mini-tooltip]:after,a[data-sr-mini-tooltip]:before{position:absolute;bottom:40px;visibility:hidden;opacity:0;-webkit-transition:opacity .2s,-webkit-transform .2s ease;transition:opacity .2s,-webkit-transform .2s ease;transition:transform .2s ease,opacity .2s;transition:transform .2s ease,opacity .2s,-webkit-transform .2s ease;box-shadow:0 0 10px rgba(0,0,0,.3);z-index:99}a[data-sr-mini-tooltip]:before{content:attr(data-sr-mini-tooltip);background:#000;color:#fff;font-size:10px;font-weight:700;padding:10px 15px;border-radius:5px;white-space:nowrap;text-decoration:none;text-transform:uppercase;letter-spacing:1px}a[data-sr-mini-tooltip]:after{width:0;height:0;border:6px solid transparent;content:""}a[data-sr-mini-tooltip]:hover:after,a[data-sr-mini-tooltip]:hover:before{visibility:visible;opacity:.85;-webkit-transform:translateY(0);transform:translateY(0)}a[data-sr-mini-tooltip][data-position=top]:before{bottom:100%;left:-130%;margin-bottom:10px}a[data-sr-mini-tooltip][data-position=top]:after{border-top-color:#000;border-bottom:0;bottom:101%;left:calc(50% - 6px);margin-bottom:4px}a[data-sr-mini-tooltip][data-position=left]:before{top:-12%;right:100%;margin-right:10px}a[data-sr-mini-tooltip][data-position=left]:after{border-left-color:#000;border-right:0;top:calc(50% - 3px);right:100%;margin-top:-6px;margin-right:4px}a[data-sr-mini-tooltip][data-position=right]:before{top:-5%;left:100%;margin-left:10px}a[data-sr-mini-tooltip][data-position=right]:after{border-right-color:#000;border-left:none;top:calc(50% - 6px);left:calc(100%+4px)}a[data-sr-mini-tooltip][data-position=bottom]:before{top:100%;left:-130%;margin-top:10px}a[data-sr-mini-tooltip][data-position=bottom]:after{border-bottom-color:#000;border-top:0;top:100%;left:5px;margin-top:4px}',""])},586:function(e,t,r){var n=r(497);"string"==typeof n&&(n=[[e.id,n,""]]),r(6)(n,{}),n.locals&&(e.exports=n.locals)},593:function(e,t,r){var n;!function(o,i,a){function s(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function l(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return m[e.which]?m[e.which]:g[e.which]?g[e.which]:String.fromCharCode(e.which).toLowerCase()}function c(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function u(e,t){var r,n,o,i=[];for(r=e,"+"===r?r=["+"]:(r=r.replace(/\+{2}/g,"+plus"),r=r.split("+")),o=0;o<r.length;++o)n=r[o],y[n]&&(n=y[n]),t&&"keypress"!=t&&b[n]&&(n=b[n],i.push("shift")),p(n)&&i.push(n);if(r=n,o=t,!o){if(!h){h={};for(var a in m)95<a&&112>a||m.hasOwnProperty(a)&&(h[m[a]]=a)}o=h[r]?"keydown":"keypress"}return"keypress"==o&&i.length&&(o="keydown"),{key:n,modifiers:i,action:o}}function d(e,t){return null!==e&&e!==i&&(e===t||d(e.parentNode,t))}function f(e){function t(e){e=e||{};var t,r=!1;for(t in g)e[t]?r=!0:g[t]=0;r||(v=!1)}function r(e,t,r,n,o,i){var a,s,l=[],c=r.type;if(!h._callbacks[e])return[];for("keyup"==c&&p(e)&&(t=[e]),a=0;a<h._callbacks[e].length;++a)if(s=h._callbacks[e][a],(n||!s.seq||g[s.seq]==s.level)&&c==s.action){var u;(u="keypress"==c&&!r.metaKey&&!r.ctrlKey)||(u=s.modifiers,u=t.sort().join(",")===u.sort().join(",")),u&&(u=n&&s.seq==n&&s.level==i,(!n&&s.combo==o||u)&&h._callbacks[e].splice(a,1),l.push(s))}return l}function n(e,t,r,n){h.stopCallback(t,t.target||t.srcElement,r,n)||!1!==e(t,r)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=l(e);t&&("keyup"==e.type&&b===t?b=!1:h.handleKey(t,c(e),e))}function a(e,r,o,i){function a(r){return function(){v=r,++g[e],clearTimeout(m),m=setTimeout(t,1e3)}}function s(r){n(o,r,e),"keyup"!==i&&(b=l(r)),setTimeout(t,10)}for(var c=g[e]=0;c<r.length;++c){var p=c+1===r.length?s:a(i||u(r[c+1]).action);d(r[c],p,i,e,c)}}function d(e,t,n,o,i){h._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var s=e.split(" ");1<s.length?a(e,s,t,n):(n=u(e,n),h._callbacks[n.key]=h._callbacks[n.key]||[],r(n.key,n.modifiers,{type:n.action},o,e,i),h._callbacks[n.key][o?"unshift":"push"]({callback:t,modifiers:n.modifiers,action:n.action,seq:o,level:i,combo:e}))}var h=this;if(e=e||i,!(h instanceof f))return new f(e);h.target=e,h._callbacks={},h._directMap={};var m,g={},b=!1,y=!1,v=!1;h._handleKey=function(e,o,i){var a,s=r(e,o,i);o={};var l=0,c=!1;for(a=0;a<s.length;++a)s[a].seq&&(l=Math.max(l,s[a].level));for(a=0;a<s.length;++a)s[a].seq?s[a].level==l&&(c=!0,o[s[a].seq]=1,n(s[a].callback,i,s[a].combo,s[a].seq)):c||n(s[a].callback,i,s[a].combo);s="keypress"==i.type&&y,i.type!=v||p(e)||s||t(o),y=c&&"keydown"==i.type},h._bindMultiple=function(e,t,r){for(var n=0;n<e.length;++n)d(e[n],t,r)},s(e,"keypress",o),s(e,"keydown",o),s(e,"keyup",o)}if(o){var h,m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},b={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},y={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(a=1;20>a;++a)m[111+a]="f"+a;for(a=0;9>=a;++a)m[a+96]=a;f.prototype.bind=function(e,t,r){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,r),this},f.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},f.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},f.prototype.reset=function(){return this._callbacks={},this._directMap={},this},f.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap ")||d(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},f.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},f.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(m[t]=e[t]);h=null},f.init=function(){var e,t=f(i);for(e in t)"_"!==e.charAt(0)&&(f[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},f.init(),o.Mousetrap=f,"undefined"!=typeof e&&e.exports&&(e.exports=f),r(187)&&(n=function(){return f}.call(t,r,t,e),!(void 0!==n&&(e.exports=n)))}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}});