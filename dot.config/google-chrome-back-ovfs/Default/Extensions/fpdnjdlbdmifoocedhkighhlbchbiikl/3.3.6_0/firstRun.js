var backgroundPage=chrome.extension.getBackgroundPage();var require=backgroundPage.require;var subscriptionClasses=require("subscriptionClasses");var Subscription=subscriptionClasses.Subscription;var FilterNotifier=require("filterNotifier").FilterNotifier;var FilterStorage=require("filterStorage").FilterStorage;var DownloadableSubscription=subscriptionClasses.DownloadableSubscription;var Synchronizer=require("synchronizer").Synchronizer;var Cscript=require("cscript").Cscript;var fdownnum=0;var alldown=1;var _localStorage=localStorage;function getURLParameter(name){return decodeURIComponent((new RegExp('[?|&]'+name+'='+'([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g,'%20'))||null}var cc=0;var pbs=0;function doprogress(){var sum=20;if(cc!=sum){var num=(cc+1)*100/sum;$(".progress-bar").css("width",num+"%");cc+=1;setTimeout(doprogress,8000/sum)}else{pbs=1}}doprogress();function addsubscription(){var info=new Browser();if(info.browser.indexOf('360')>-1){var surl="http://sub.adtchrome.com/adt-chinalist-easylist360.txt"}else{var surl="http://sub.adtchrome.com/adt-chinalist-easylist.txt"}var featureSubscriptions=[{homepage:"http://www.adtchrome.com/extension/adt-chinalist-easylist.html",title:"广告终结者默认过滤规则",url:surl,disabled:false}];featureSubscriptions.forEach(function(s){var subscription=Subscription.fromURL(s.url);FilterStorage.addSubscription(subscription);subscription.disabled=s.disabled;subscription.title=s.title;subscription.homepage=s.homepage;if(subscription instanceof DownloadableSubscription&&!subscription.lastDownload){Synchronizer.execute(subscription)}});Cscript.add('去视频广告脚本','http://sub.adtchrome.com/videoadjs.txt')}function getBroswerType(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("lbbrowser")>0){return"lbbrowser"};var _track="track"in document.createElement("track");var _style="scoped"in document.createElement("style");var _v8locale="v8Locale"in window;if(_track&&_style&&_v8locale){return"360se"}else if(_track&&_style&&!_v8locale){return"360ee"}return"chrome"}(function($){$.fn.extend({center:function(options){var options=$.extend({inside:window,transition:0,minX:0,minY:0,withScrolling:true,vertical:true,horizontal:true},options);return this.each(function(){var props={position:'absolute'};if(options.vertical){var top=($(options.inside).height()-$(this).outerHeight())/2;if(options.withScrolling)top+=$(options.inside).scrollTop()||0;top=(top>options.minY?top:options.minY);$.extend(props,{top:top+'px'})}if(options.horizontal){var left=($(options.inside).width()-$(this).outerWidth())/2;if(options.withScrolling)left+=$(options.inside).scrollLeft()||0;left=(left>options.minX?left:options.minX);$.extend(props,{left:left+'px'})}if(options.transition>0)$(this).animate(props,options.transition);else $(this).css(props);return $(this)})}})})(jQuery);$(function(){$("#checkbox").change(function(){if($('#checkbox').prop('checked')){_localStorage['privacy_policy']=true}else{_localStorage.removeItem('privacy_policy')}});$('#button').click(function(){let checkbox=_localStorage['privacy_policy'];if(!(checkbox&&checkbox=='true')){alert('请先勾选同意《隐私政策》')}else if(!pbs){console.log('加载配置完成')}else{check()}});window.onbeforeunload=function(){if(!_localStorage['privacy_policy']){return confirm("确定退出吗")}};$('#checkbox').prop('checked',_localStorage['privacy_policy']&&_localStorage['privacy_policy']=='true');let _checkbox=$('#checkbox').prop('checked');function check(){$("body").removeClass("stop-scrolling");$(".popboxbg").remove();$(".popbox").remove()}if(!_checkbox){$("body").addClass("stop-scrolling");$('.popbox').center();$(window).bind('resize',function(){$('.popbox').center({transition:300})})}else{check()}addsubscription();$(window).scroll(function(e){if($(window).scrollTop()>69){$("#sideToolbar-up").fadeIn(100)}else{$("#sideToolbar-up").fadeOut(100)}});$("#sideToolbar-up").click(function(e){$('body,html').animate({scrollTop:0},500)});$("#"+getBroswerType()+"-warn").show();if(getURLParameter("test")!=null){$("body").removeClass("stop-scrolling");$(".popboxbg").remove();$(".popbox").remove()}});var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-48334954-1']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src='https://ssl.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s)})();